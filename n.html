<html lang="en" debug="true" style="" class="js flexbox canvas canvastext webgl touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><div id="FirebugChannel" style="display: none;">FB_deactivate</div><script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script src="chrome-extension://ehemiojjcpldeipjhjkepfdaohajpbdo/firebug-lite.js" id="FirebugLite" firebugignore="true" extension="Chrome" extension-id="ehemiojjcpldeipjhjkepfdaohajpbdo"></script><head><style type="text/css">.gm-control-active img{box-sizing:content-box;pointer-events:none}.gm-control-active:hover img:nth-child(1),.gm-control-active:active img:nth-child(1),.gm-control-active:active img:nth-child(2){display:none}
</style><link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700"><style type="text/css">.gm-style .gm-style-cc span,.gm-style .gm-style-cc a,.gm-style .gm-style-mtc div{font-size:10px;box-sizing:border-box}
</style><style type="text/css">@media print {  .gm-style .gmnoprint, .gmnoprint {    display:none  }}@media screen {  .gm-style .gmnoscreen, .gmnoscreen {    display:none  }}</style><style type="text/css">.pac-container{background-color:#fff;position:absolute!important;z-index:1000;border-radius:2px;border-top:1px solid #d9d9d9;font-family:Arial,sans-serif;box-shadow:0 2px 6px rgba(0,0,0,0.3);-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.pac-logo:after{content:"";padding:1px 1px 1px 0;height:18px;box-sizing:border-box;text-align:right;display:block;background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/powered-by-google-on-white3.png);background-position:right;background-repeat:no-repeat;background-size:120px 14px}.hdpi.pac-logo:after{background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/powered-by-google-on-white3_hdpi.png)}.pac-item{cursor:default;padding:0 4px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;line-height:30px;text-align:left;border-top:1px solid #e6e6e6;font-size:11px;color:#999}.pac-item:hover{background-color:#fafafa}.pac-item-selected,.pac-item-selected:hover{background-color:#ebf2fe}.pac-matched{font-weight:700}.pac-item-query{font-size:13px;padding-right:3px;color:#000}.pac-icon{width:15px;height:20px;margin-right:7px;margin-top:6px;display:inline-block;vertical-align:top;background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/autocomplete-icons.png);background-size:34px}.hdpi .pac-icon{background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/autocomplete-icons_hdpi.png)}.pac-icon-search{background-position:-1px -1px}.pac-item-selected .pac-icon-search{background-position:-18px -1px}.pac-icon-marker{background-position:-1px -161px}.pac-item-selected .pac-icon-marker{background-position:-18px -161px}.pac-placeholder{color:gray}
</style><style type="text/css">.pac-container{background-color:#fff;position:absolute!important;z-index:1000;border-radius:2px;border-top:1px solid #d9d9d9;font-family:Arial,sans-serif;box-shadow:0 2px 6px rgba(0,0,0,0.3);-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.pac-logo:after{content:"";padding:1px 1px 1px 0;height:18px;box-sizing:border-box;text-align:right;display:block;background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/powered-by-google-on-white3.png);background-position:right;background-repeat:no-repeat;background-size:120px 14px}.hdpi.pac-logo:after{background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/powered-by-google-on-white3_hdpi.png)}.pac-item{cursor:default;padding:0 4px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;line-height:30px;text-align:left;border-top:1px solid #e6e6e6;font-size:11px;color:#999}.pac-item:hover{background-color:#fafafa}.pac-item-selected,.pac-item-selected:hover{background-color:#ebf2fe}.pac-matched{font-weight:700}.pac-item-query{font-size:13px;padding-right:3px;color:#000}.pac-icon{width:15px;height:20px;margin-right:7px;margin-top:6px;display:inline-block;vertical-align:top;background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/autocomplete-icons.png);background-size:34px}.hdpi .pac-icon{background-image:url(https://maps.gstatic.com/mapfiles/api-3/images/autocomplete-icons_hdpi.png)}.pac-icon-search{background-position:-1px -1px}.pac-item-selected .pac-icon-search{background-position:-18px -1px}.pac-icon-marker{background-position:-1px -161px}.pac-item-selected .pac-icon-marker{background-position:-18px -161px}.pac-placeholder{color:gray}
</style><style type="text/css">.gm-style-pbc{transition:opacity ease-in-out;background-color:rgba(0,0,0,0.45);text-align:center}.gm-style-pbt{font-size:22px;color:white;font-family:Roboto,Arial,sans-serif;position:relative;margin:0;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}
</style>
    <script src="/js/pace.min.js"></script>
    <link href="/css/pace.css" rel="stylesheet">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
    <meta name="viewport" content="initial-scale=0.25">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@agos">
    <meta name="twitter:image" content="https://agos.rappler.com/img/fb.png?v=master27032018.412517906872707061">
    <meta property="twitter:title" content="Agos Alert Map - Technology and Community Action to achieve Zero Casualty">

    <meta property="og:image" content="https://agos.rappler.com/img/fb.png?v=master27032018.412517906872707061">
    <meta property="og:url" content="https://agos.rappler.com/embedmap">
    <meta property="og:site_name" content="Agos-eBayanihan">
    <meta property="og:type" content="website">
    <meta property="og:description" content="Agos powered by eBayanihan uses mobile and web technologies and social media to help communities deal with natural hazards, disasters and climate change">

    <meta property="twitter:description" content="Agos powered by eBayanihan uses mobile and web technologies and social media to help communities deal with natural hazards, disasters and climate change">

    <meta name="description" content="Agos powered by eBayanihan uses mobile and web technologies and social media to help communities deal with natural hazards, disasters and climate change">
    <meta name="viewport" content="width=device-width">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    
    <link rel="shortcut icon" href="/img/favicon.ico">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    
    <title>Agos-eBayanihan Alert Map - Technology and Community Action to achieve Zero Casualty</title>
    

    <!-- Rappler core CSS -->
    <link href="/css/rappler.css" rel="stylesheet">
    <link href="/css/jquery.switchButton.css" rel="stylesheet">


    <!-- Agos-eBayanihan Dependencies -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/style3.css" rel="stylesheet">
    <!-- <link rel="stylesheet" media="screen and (min-width: 1025px)" href="/css/style3.css"> -->

    <!-- custom scrollbar stylesheet -->
<!--     <link rel="stylesheet" href="/css/jquery.mCustomScrollbar.css"> -->

    <script type="text/javascript" src="https://cdns.gigya.com/js/socialize.js?apiKey=3_ao3WNnqtFDhSjgAe1TC-0ykqEbogOlYXE1kYr0LoFxTDRzrwrGJkZpdnR_XEn3D5">
        { siteName: "rappler.com", enabledProviders: "facebook,twitter,google,linkedin",connectWithoutLoginBehavior: "alwaysLogin", me_server: "https://me.rappler.com"}
    </script>


   <!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.css"> -->
   <link rel="stylesheet" media="screen and (max-width: 1024px)" href="/css/style4.css">
   <script src="/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
      html,body {
        overflow: hidden;
      }
      /** FIX for Bootstrap and Google Maps Info window styes problem **/
      img[src*="gstatic.com/"], img[src*="googleapis.com/"] {
        max-width: none;
      }
      /** FIX for Bootstrap and Google Maps Info window styes problem **/
      img[src*="gstatic.com/"], img[src*="googleapis.com/"] {
        max-width: none;
      }

      .switch-label:hover, .switch-label a:hover {
        cursor: default!important;
      }

      

      #search input[type="search"]{
        padding:0 10px 0 40px;
        width: 170px;
        outline: none !important;
      }
      @media only screen and (max-width: 1024px){
        #map-wrap{
          display:none;
        }
      }
      @media only screen and (max-width: 330px){
        #filter-reports div select{
          padding: 0px;
          margin: 0;
        }
      }
      @media only screen and (max-width: 564px){
        #filter-reports div{
          display: flex;
          margin-top: 50px;
        }
        #map-canvas-2{
          margin-top: -102px !important;
        }
        #search input[type="search"] {
            width: 100%;
        }
      }
    </style>

    <!-- Add fancyBox main CSS file -->
    <link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=2.1.5" media="screen">
  <style type="text/css" id="notify-bootstrap">.notifyjs-bootstrap-base {
  padding: 8px 15px 8px 14px;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
  background-color: #fff;
  border: 1px solid #F5F4F1;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  white-space: nowrap;
  padding-left: 25px;
  background-repeat: no-repeat;
  background-position: 3px 7px;
}
.notifyjs-bootstrap-error {
  color: #B94A48;
  background-color: #F2DEDE;
  border-color: #EED3D7;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=);
}
.notifyjs-bootstrap-success {
  color: #468847;
  background-color: #DFF0D8;
  border-color: #D6E9C6;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==);
}
.notifyjs-bootstrap-info {
  color: #3A87AD;
  background-color: #D9EDF7;
  border-color: #BCE8F1;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=);
}
.notifyjs-bootstrap-warn {
  color: #C09853;
  background-color: #FCF8E3;
  border-color: #FBEED5;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC);
}
</style><style type="text/css" id="core-notify">.notifyjs-corner {
  position: fixed;
  margin: 5px;
  z-index: 1050;
}

.notifyjs-corner .notifyjs-wrapper,
.notifyjs-corner .notifyjs-container {
  position: relative;
  display: block;
  height: inherit;
  width: inherit;
  margin: 3px;
}

.notifyjs-wrapper {
  z-index: 1;
  position: absolute;
  display: inline-block;
  height: 0;
  width: 0;
}

.notifyjs-container {
  display: none;
  z-index: 1;
  position: absolute;
}

.notifyjs-hidable {
  cursor: pointer;
}

[data-notify-text],[data-notify-html] {
  position: relative;
}

.notifyjs-arrow {
  position: absolute;
  z-index: 2;
  width: 0;
  height: 0;
}</style><style type="text/css">.fancybox-margin{margin-right:0px;}</style><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/common.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/util.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/map.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/controls.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/places_impl.js"></script><style type="text/css">.gm-style {
        font: 400 11px Roboto, Arial, sans-serif;
        text-decoration: none;
      }
      .gm-style img { max-width: none; }</style><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/onion.js"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f5f6f7;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:-webkit-sticky;top:0}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_customer_chat_bounce_in_v2{animation-duration:300ms;animation-name:fb_bounce_in_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_v2{animation-duration:300ms;animation-name:fb_bounce_out_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_v2_mobile_chat_started{animation-duration:300ms;animation-name:fb_bounce_in_v2_mobile_chat_started;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_v2_mobile_chat_started{animation-duration:300ms;animation-name:fb_bounce_out_v2_mobile_chat_started;transition-timing-function:ease-in}.fb_customer_chat_bubble_pop_in{animation-duration:250ms;animation-name:fb_customer_chat_bubble_bounce_in_animation}.fb_customer_chat_bubble_animated_no_badge{box-shadow:0 3px 12px rgba(0, 0, 0, .15);transition:box-shadow 150ms linear}.fb_customer_chat_bubble_animated_no_badge:hover{box-shadow:0 5px 24px rgba(0, 0, 0, .3)}.fb_customer_chat_bubble_animated_with_badge{box-shadow:-5px 4px 14px rgba(0, 0, 0, .15);transition:box-shadow 150ms linear}.fb_customer_chat_bubble_animated_with_badge:hover{box-shadow:-5px 8px 24px rgba(0, 0, 0, .2)}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}.fb_mobile_overlay_active{background-color:#fff;height:100%;overflow:hidden;position:fixed;visibility:hidden;width:100%}@keyframes fb_bounce_in_v2{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}50%{transform:scale(1.03, 1.03);transform-origin:bottom right}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}}@keyframes fb_bounce_in_v2_mobile_chat_started{0%{opacity:0;top:20px}100%{opacity:1;top:0}}@keyframes fb_bounce_out_v2{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}}@keyframes fb_bounce_out_v2_mobile_chat_started{0%{opacity:1;top:0}100%{opacity:0;top:20px}}@keyframes fb_customer_chat_bubble_bounce_in_animation{0%{bottom:6pt;opacity:0;transform:scale(0, 0);transform-origin:center}70%{bottom:18pt;opacity:1;transform:scale(1.2, 1.2)}100%{transform:scale(1, 1)}}</style><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/stats.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps-api-ssl.google.com/maps-api-v3/api/js/34/10/intl/en_au/marker.js"></script><style type="text/css">@-webkit-keyframes _gm7043 {
0% { -webkit-transform: translate3d(0px,-500px,0); -webkit-animation-timing-function: ease-in; }
50% { -webkit-transform: translate3d(0px,0px,0); -webkit-animation-timing-function: ease-out; }
75% { -webkit-transform: translate3d(0px,-20px,0); -webkit-animation-timing-function: ease-in; }
100% { -webkit-transform: translate3d(0px,0px,0); -webkit-animation-timing-function: ease-out; }
}
</style></head><script src="chrome-extension://ehemiojjcpldeipjhjkepfdaohajpbdo/googleChrome.js"></script>

<body style="" class="  pace-done"><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f387ed3c1964b7c" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="https://www.facebook.com/connect/ping?ancestor_origins=https%3A%2F%2Fagos.rappler.com&amp;client_id=129650183806730&amp;domain=agos.rappler.com&amp;origin=1&amp;redirect_uri=https%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter%2Fr%2Fmp2v3DK3INU.js%3Fversion%3D42%23cb%3Df17f9c569374b78%26domain%3Dagos.rappler.com%26origin%3Dhttps%253A%252F%252Fagos.rappler.com%252Ff3ef6a3d4b25bfc%26relation%3Dparent&amp;response_type=token%2Csigned_request&amp;sdk=joey&amp;version=v2.4" style="display: none;"></iframe><iframe name="f14693982bfeed" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="https://www.facebook.com/connect/ping?ancestor_origins=https%3A%2F%2Fagos.rappler.com&amp;client_id=129650183806730&amp;domain=agos.rappler.com&amp;origin=1&amp;redirect_uri=https%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter%2Fr%2Fmp2v3DK3INU.js%3Fversion%3D42%23cb%3Df1223bf9b05a5f4%26domain%3Dagos.rappler.com%26origin%3Dhttps%253A%252F%252Fagos.rappler.com%252Ff3ef6a3d4b25bfc%26relation%3Dparent&amp;response_type=token%2Csigned_request&amp;sdk=joey&amp;version=v2.4" style="display: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="https://staticxx.facebook.com/connect/xd_arbiter/r/mp2v3DK3INU.js?version=42#channel=f3ef6a3d4b25bfc&amp;origin=https%3A%2F%2Fagos.rappler.com" style="border: none;"></iframe></div></div></div><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="width: 100%;">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>
  <div class="responsive" id="page-content" style="margin-top:0px">
    <section id="search" style="background-color: transparent;">
      <input type="search" placeholder="Search location here..." id="search-location-input-2" style="background-color:rgba(255,254,254,0.50);" autocomplete="off">
    </section>

    <section id="filter-reports">
      <div class="pull-right">
       <!-- class="visible-sm" -->
        <select id="report-list-options-2" class="report-list-options">
          <option selected="selected" value="ALL">All Reports</option>
          <option value="INFO">Info Reports</option>
          <option value="FLOOD">Flood Reports</option>
          <option value="RESCUE">Rescue Reports</option>
          <option value="BRIDGE">Bridge</option>
          <option value="EARTHQUAKE">Earthquake</option>
          <option value="EARTHQUAKE-EVACUATION-SITE">Earthquake Evacuation Site</option>
          <option value="FIRE">Fire</option>
          <option value="LANDSLIDE">Landslide</option>
          <option value="RAIN">Rain</option>
          <option value="RELIEF">Relief</option>
          <option value="STORM-SURGE">Storm Surge</option>
          <option value="VOLCANIC-ERUPTION">Volcanic Eruption</option>
        </select>

        <select id="report-list-verified-options-2" class="report-list-verified-options">
          <option selected="selected" value="ALL">All</option>
          <option value="VERIFIED">Verified</option>
          <option value="UNVERIFIED">Unverified</option>
        </select>

        <select id="report-list-sort-options-2" class="report-list-sort-options">
          <option value="HOT_DOWN">Hottest</option>
          <option value="HOT_UP">Least Hot</option>
          <option selected="selected" value="DATE_DOWN">Newest</option>
          <option value="DATE_UP">Oldest</option>
        </select>
      </div>
    </section>
    <div id="map-canvas-2" style="min-width: 320px; height: 100%; margin-top: -55px; position: relative; overflow: hidden;"><div style="height: 100%; width: 100%; position: absolute; top: 0px; left: 0px; background-color: rgb(229, 227, 223);"><div class="gm-style" style="position: absolute; z-index: 0; left: 0px; top: 0px; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px;"><div tabindex="0" style="position: absolute; z-index: 0; left: 0px; top: 0px; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px; cursor: url(&quot;https://maps.gstatic.com/mapfiles/openhand_8_8.cur&quot;), default;"><div style="z-index: 1; position: absolute; left: 50%; top: 50%; width: 100%; transform: translate(0px, 0px);"><div style="position: absolute; left: 0px; top: 0px; z-index: 100; width: 100%;"><div style="position: absolute; left: 0px; top: 0px; z-index: 0;"><div style="position: absolute; z-index: 984; transform: matrix(1, 0, 0, 1, -24, -96);"><div style="position: absolute; left: 0px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -256px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -256px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 0px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 256px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 256px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 256px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 0px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -256px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -512px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -512px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -512px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div></div></div></div><div style="position: absolute; left: 0px; top: 0px; z-index: 101; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 102; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 103; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 0;"><div style="position: absolute; z-index: 984; transform: matrix(1, 0, 0, 1, -24, -96);"><div style="position: absolute; left: -256px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47178!3i30385!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=120642" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -256px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47178!3i30384!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=51700" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 0px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47179!3i30384!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=130799" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 256px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47180!3i30384!4i256!2m3!1e0!2sm!3i437142136!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=1977" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 256px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47180!3i30385!4i256!2m3!1e0!2sm!3i437142136!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=24201" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 256px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47180!3i30386!4i256!2m3!1e0!2sm!3i437142136!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=46425" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 0px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47179!3i30386!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=44176" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 0px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47179!3i30385!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=21952" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -256px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47178!3i30386!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=11795" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -512px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47177!3i30386!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=63767" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -512px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47177!3i30385!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=41543" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -512px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47177!3i30384!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=103672" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div></div></div></div><div class="gm-style-pbc" style="z-index: 2; position: absolute; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px; left: 0px; top: 0px; opacity: 0;"><p class="gm-style-pbt"></p></div><div style="z-index: 3; position: absolute; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px; left: 0px; top: 0px;"><div style="z-index: 4; position: absolute; left: 50%; top: 50%; width: 100%; transform: translate(0px, 0px);"><div style="position: absolute; left: 0px; top: 0px; z-index: 104; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 105; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 106; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 107; width: 100%;"></div></div></div></div><iframe aria-hidden="true" frameborder="0" style="z-index: -1; position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; border: none;" src="about:blank"></iframe><div style="margin-left: 5px; margin-right: 5px; z-index: 1000000; position: absolute; left: 0px; bottom: 0px;"><a target="_blank" rel="noopener" href="https://maps.google.com/maps?ll=12.975794,79.162505&amp;z=16&amp;t=m&amp;hl=en-IN&amp;gl=US&amp;mapclient=apiv3" title="Click to see this area on Google Maps" style="position: static; overflow: visible; float: none; display: inline;"><div style="width: 66px; height: 26px; cursor: pointer;"><img alt="" src="https://maps.gstatic.com/mapfiles/api-3/images/google4.png" draggable="false" style="position: absolute; left: 0px; top: 0px; width: 66px; height: 26px; user-select: none; border: 0px; padding: 0px; margin: 0px;"></div></a></div><div style="background-color: white; padding: 15px 21px; border: 1px solid rgb(171, 171, 171); font-family: Roboto, Arial, sans-serif; color: rgb(34, 34, 34); box-sizing: border-box; box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 16px; z-index: 10000002; display: none; width: 300px; height: 180px; position: absolute; left: 213px; top: 230px;"><div style="padding: 0px 0px 10px; font-size: 16px;">Map Data</div><div style="font-size: 13px;">Map data ©2018 Google</div><div style="width: 13px; height: 13px; overflow: hidden; position: absolute; opacity: 0.7; right: 12px; top: 12px; z-index: 10000;"><img alt="" src="https://maps.gstatic.com/mapfiles/api-3/images/mapcnt6.png" draggable="false" style="position: absolute; left: -2px; top: -336px; width: 59px; height: 492px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><img alt="" src="https://maps.gstatic.com/mapfiles/transparent.png" draggable="false" style="width: 37px; height: 37px; user-select: none; border: 0px; padding: 0px; margin: 0px; position: absolute; right: 0px; top: 0px; z-index: 10001; cursor: pointer;"></div><div class="gmnoprint" style="z-index: 1000001; position: absolute; right: 71px; bottom: 0px; width: 121px;"><div draggable="false" class="gm-style-cc" style="user-select: none; height: 14px; line-height: 14px;"><div style="opacity: 0.7; width: 100%; height: 100%; position: absolute;"><div style="width: 1px;"></div><div style="background-color: rgb(245, 245, 245); width: auto; height: 100%; margin-left: 1px;"></div></div><div style="position: relative; padding-right: 6px; padding-left: 6px; font-family: Roboto, Arial, sans-serif; font-size: 10px; color: rgb(68, 68, 68); white-space: nowrap; direction: ltr; text-align: right; vertical-align: middle; display: inline-block;"><a style="text-decoration: none; cursor: pointer; display: none;">Map Data</a><span>Map data ©2018 Google</span></div></div></div><div class="gmnoscreen" style="position: absolute; right: 0px; bottom: 0px;"><div style="font-family: Roboto, Arial, sans-serif; font-size: 11px; color: rgb(68, 68, 68); direction: ltr; text-align: right; background-color: rgb(245, 245, 245);">Map data ©2018 Google</div></div><div class="gmnoprint gm-style-cc" draggable="false" style="z-index: 1000001; user-select: none; height: 14px; line-height: 14px; position: absolute; right: 0px; bottom: 0px;"><div style="opacity: 0.7; width: 100%; height: 100%; position: absolute;"><div style="width: 1px;"></div><div style="background-color: rgb(245, 245, 245); width: auto; height: 100%; margin-left: 1px;"></div></div><div style="position: relative; padding-right: 6px; padding-left: 6px; font-family: Roboto, Arial, sans-serif; font-size: 10px; color: rgb(68, 68, 68); white-space: nowrap; direction: ltr; text-align: right; vertical-align: middle; display: inline-block;"><a href="https://www.google.com/intl/en-IN_US/help/terms_maps.html" target="_blank" rel="noopener" style="text-decoration: none; cursor: pointer; color: rgb(68, 68, 68);">Terms of Use</a></div></div><button draggable="false" title="Toggle fullscreen view" aria-label="Toggle fullscreen view" type="button" class="gm-control-active gm-fullscreen-control" style="background: none rgb(255, 255, 255); border: 0px; margin: 10px; padding: 0px; position: absolute; cursor: pointer; user-select: none; border-radius: 2px; height: 40px; width: 40px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; overflow: hidden; top: 0px; right: 0px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%20018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%2C0v2v4h2V2h4V0H2H0z%20M16%2C0h-4v2h4v4h2V2V0H16z%20M16%2C16h-4v2h4h2v-2v-4h-2V16z%20M2%2C12H0v4v2h2h4v-2H2V12z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%2C0v2v4h2V2h4V0H2H0z%20M16%2C0h-4v2h4v4h2V2V0H16z%20M16%2C16h-4v2h4h2v-2v-4h-2V16z%20M2%2C12H0v4v2h2h4v-2H2V12z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%2C0v2v4h2V2h4V0H2H0z%20M16%2C0h-4v2h4v4h2V2V0H16z%20M16%2C16h-4v2h4h2v-2v-4h-2V16z%20M2%2C12H0v4v2h2h4v-2H2V12z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 11px;"></button><div class="gmnoprint gm-bundled-control gm-bundled-control-on-bottom" draggable="false" controlwidth="40" controlheight="81" style="margin: 10px; user-select: none; position: absolute; bottom: 95px; right: 40px;"><div class="gmnoprint" controlwidth="40" controlheight="81" style="position: absolute; left: 0px; top: 0px;"><div draggable="false" style="user-select: none; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-radius: 2px; cursor: pointer; background-color: rgb(255, 255, 255); width: 40px; height: 81px;"><button draggable="false" title="Zoom in" aria-label="Zoom in" type="button" class="gm-control-active" style="background: none; display: block; border: 0px; margin: 0px; padding: 0px; position: relative; cursor: pointer; user-select: none; overflow: hidden; width: 40px; height: 40px; top: 0px; left: 0px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpolygon%20fill%3D%22%23666%22%20points%3D%2218%2C7%2011%2C7%2011%2C0%207%2C0%207%2C7%200%2C7%200%2C11%207%2C11%207%2C18%2011%2C18%2011%2C11%2018%2C11%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 9px 11px 13px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpolygon%20fill%3D%22%23333%22%20points%3D%2218%2C7%2011%2C7%2011%2C0%207%2C0%207%2C7%200%2C7%200%2C11%207%2C11%207%2C18%2011%2C18%2011%2C11%2018%2C11%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 9px 11px 13px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpolygon%20fill%3D%22%23111%22%20points%3D%2218%2C7%2011%2C7%2011%2C0%207%2C0%207%2C7%200%2C7%200%2C11%207%2C11%207%2C18%2011%2C18%2011%2C11%2018%2C11%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 9px 11px 13px;"></button><div style="position: relative; overflow: hidden; width: 30px; height: 1px; margin: 0px 5px; background-color: rgb(230, 230, 230); top: 0px;"></div><button draggable="false" title="Zoom out" aria-label="Zoom out" type="button" class="gm-control-active" style="background: none; display: block; border: 0px; margin: 0px; padding: 0px; position: relative; cursor: pointer; user-select: none; overflow: hidden; width: 40px; height: 40px; top: 0px; left: 0px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%2C7h18v4H0V7z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 13px 11px 9px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%2C7h18v4H0V7z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 13px 11px 9px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%2C7h18v4H0V7z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 13px 11px 9px;"></button></div></div></div><div class="gmnoprint gm-bundled-control gm-bundled-control-on-bottom" draggable="false" controlwidth="0" controlheight="0" style="margin: 10px; user-select: none; position: absolute; display: none; bottom: 26px; left: 0px;"><div class="gmnoprint" controlwidth="40" controlheight="40" style="display: none; position: absolute;"><div style="width: 40px; height: 40px;"><button draggable="false" title="Rotate map 90 degrees" aria-label="Rotate map 90 degrees" type="button" class="gm-control-active" style="background: none rgb(255, 255, 255); display: none; border: 0px; margin: 0px 0px 32px; padding: 0px; position: relative; cursor: pointer; user-select: none; width: 40px; height: 40px; top: 0px; left: 0px; overflow: hidden; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-radius: 2px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2222%22%20viewBox%3D%220%200%2024%2022%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20fill-rule%3D%22evenodd%22%20d%3D%22M20%2010c0-5.52-4.48-10-10-10s-10%204.48-10%2010v5h5v-5c0-2.76%202.24-5%205-5s5%202.24%205%205v5h-4l6.5%207%206.5-7h-4v-5z%22%20clip-rule%3D%22evenodd%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 28px; width: 28px; margin: 6px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2222%22%20viewBox%3D%220%200%2024%2022%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20fill-rule%3D%22evenodd%22%20d%3D%22M20%2010c0-5.52-4.48-10-10-10s-10%204.48-10%2010v5h5v-5c0-2.76%202.24-5%205-5s5%202.24%205%205v5h-4l6.5%207%206.5-7h-4v-5z%22%20clip-rule%3D%22evenodd%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 28px; width: 28px; margin: 6px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2222%22%20viewBox%3D%220%200%2024%2022%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20fill-rule%3D%22evenodd%22%20d%3D%22M20%2010c0-5.52-4.48-10-10-10s-10%204.48-10%2010v5h5v-5c0-2.76%202.24-5%205-5s5%202.24%205%205v5h-4l6.5%207%206.5-7h-4v-5z%22%20clip-rule%3D%22evenodd%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 28px; width: 28px; margin: 6px;"></button><button draggable="false" title="Tilt map" aria-label="Tilt map" type="button" class="gm-tilt gm-control-active" style="background: none rgb(255, 255, 255); display: block; border: 0px; margin: 0px; padding: 0px; position: relative; cursor: pointer; user-select: none; width: 40px; height: 40px; top: 0px; left: 0px; overflow: hidden; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-radius: 2px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2018%2016%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%2C16h8V9H0V16z%20M10%2C16h8V9h-8V16z%20M0%2C7h8V0H0V7z%20M10%2C0v7h8V0H10z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="width: 18px; height: 16px; margin: 12px 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2018%2016%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%2C16h8V9H0V16z%20M10%2C16h8V9h-8V16z%20M0%2C7h8V0H0V7z%20M10%2C0v7h8V0H10z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="width: 18px; height: 16px; margin: 12px 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2018%2016%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%2C16h8V9H0V16z%20M10%2C16h8V9h-8V16z%20M0%2C7h8V0H0V7z%20M10%2C0v7h8V0H10z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="width: 18px; height: 16px; margin: 12px 11px;"></button></div></div></div></div></div></div>
  </div><!-- #page-content -->


      <!-- MAP -->
      <div id="map-wrap" style="width:100%">
        <div id="map-content" style="height: 500px;">
          <div class="search-location" id="search-form" style="right:5%">
            <input type="search" id="search-location-input" placeholder="Location" autocomplete="off">
          </div>
          <div class="social-media-bar" style="right:5.2%">
            <ul>
              

              <li><a href="#" onclick="facebook_share();"><img src="https://cdns3.gigya.com/gs/i/HTMLLogin/facebook_60.png" style="width:30px;height:30px;position:static;margin:0" alt=""></a></li>
              <li><a href="#" class="twitter" onclick="twitter_share();"><img src="https://cdns3.gigya.com/gs/i/HTMLLogin/twitter_60.png" style="width:30px;height:30px;position:static;margin:0" alt=""></a></li>
            </ul>
          </div>
          <div id="map-canvas" style="position: relative; overflow: hidden; height: 500px; width: 725px;"><div style="height: 100%; width: 100%; position: absolute; top: 0px; left: 0px; background-color: rgb(229, 227, 223);"><div class="gm-style" style="position: absolute; z-index: 0; left: 0px; top: 0px; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px;"><div tabindex="0" style="position: absolute; z-index: 0; left: 0px; top: 0px; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px; cursor: url(&quot;https://maps.gstatic.com/mapfiles/openhand_8_8.cur&quot;), default;"><div style="z-index: 1; position: absolute; left: 50%; top: 50%; width: 100%; transform: translate(0px, 0px);"><div style="position: absolute; left: 0px; top: 0px; z-index: 100; width: 100%;"><div style="position: absolute; left: 0px; top: 0px; z-index: 0;"><div style="position: absolute; z-index: 984; transform: matrix(1, 0, 0, 1, -24, -96);"><div style="position: absolute; left: 0px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -256px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -256px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 0px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 256px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 256px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 256px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 0px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -256px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -512px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -512px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -512px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 512px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 512px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: 512px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -768px; top: 256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -768px; top: 0px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div><div style="position: absolute; left: -768px; top: -256px; width: 256px; height: 256px;"><div style="width: 256px; height: 256px;"></div></div></div></div></div><div style="position: absolute; left: 0px; top: 0px; z-index: 101; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 102; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 103; width: 100%;"><div style="position: absolute; left: 0px; top: 0px; z-index: -1;"><div style="position: absolute; z-index: 984; transform: matrix(1, 0, 0, 1, -24, -96);"><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 0px; top: 0px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -256px; top: 0px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -256px; top: -256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 0px; top: -256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 256px; top: -256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 256px; top: 0px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 256px; top: 256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 0px; top: 256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -256px; top: 256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -512px; top: 256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -512px; top: 0px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -512px; top: -256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 512px; top: -256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 512px; top: 0px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: 512px; top: 256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -768px; top: 256px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -768px; top: 0px;"></div><div style="width: 256px; height: 256px; overflow: hidden; position: absolute; left: -768px; top: -256px;"></div></div></div><div style="width: 27px; height: 43px; overflow: hidden; position: absolute; left: -14px; top: 123px; z-index: 166; animation-duration: 500ms; animation-iteration-count: 1; animation-name: _gm7043;"><img alt="" src="https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png" draggable="false" style="position: absolute; left: 0px; top: 0px; width: 27px; height: 43px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div></div><div style="position: absolute; left: 0px; top: 0px; z-index: 0;"><div style="position: absolute; z-index: 984; transform: matrix(1, 0, 0, 1, -24, -96);"><div style="position: absolute; left: 0px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47179!3i30385!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=21952" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -256px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47178!3i30385!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=120642" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -256px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47178!3i30384!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=51700" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 0px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47179!3i30384!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=130799" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 256px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47180!3i30384!4i256!2m3!1e0!2sm!3i437142136!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=1977" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 256px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47180!3i30385!4i256!2m3!1e0!2sm!3i437142136!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=24201" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 256px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47180!3i30386!4i256!2m3!1e0!2sm!3i437142136!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=46425" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 0px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47179!3i30386!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=44176" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -256px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47178!3i30386!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=11795" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -512px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47177!3i30386!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=63767" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -512px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47177!3i30385!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=41543" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -512px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47177!3i30384!4i256!2m3!1e0!2sm!3i437142520!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=103672" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 512px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47181!3i30384!4i256!2m3!1e0!2sm!3i437140997!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=44862" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 512px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47181!3i30385!4i256!2m3!1e0!2sm!3i437140997!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=67086" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: 512px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47181!3i30386!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=37504" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -768px; top: 256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47176!3i30386!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=115739" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -768px; top: 0px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47176!3i30385!4i256!2m3!1e0!2sm!3i437142532!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=93515" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><div style="position: absolute; left: -768px; top: -256px; width: 256px; height: 256px; transition: opacity 200ms linear 0s;"><img draggable="false" alt="" role="presentation" src="https://maps-api-ssl.google.com/maps/vt?pb=!1m5!1m4!1i16!2i47176!3i30384!4i256!2m3!1e0!2sm!3i437141777!3m9!2sen-IN!3sUS!5e18!12m1!1e68!12m3!1e37!2m1!1ssmartmaps!4e0!23i1301875&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY&amp;token=84334" style="width: 256px; height: 256px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div></div></div></div><div class="gm-style-pbc" style="z-index: 2; position: absolute; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px; left: 0px; top: 0px; opacity: 0; transition-duration: 0.8s;"><p class="gm-style-pbt">Use ctrl + scroll to zoom the map</p></div><div style="z-index: 3; position: absolute; height: 100%; width: 100%; padding: 0px; border-width: 0px; margin: 0px; left: 0px; top: 0px;"><div style="z-index: 4; position: absolute; left: 50%; top: 50%; width: 100%; transform: translate(0px, 0px);"><div style="position: absolute; left: 0px; top: 0px; z-index: 104; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 105; width: 100%;"></div><div style="position: absolute; left: 0px; top: 0px; z-index: 106; width: 100%;"><div title="Your Location" style="width: 43px; height: 59px; overflow: hidden; position: absolute; opacity: 0; cursor: pointer; left: -22px; top: 115px; z-index: 166;"><img alt="" src="https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2.png" draggable="false" style="position: absolute; left: 0px; top: 0px; width: 43px; height: 59px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div></div><div style="position: absolute; left: 0px; top: 0px; z-index: 107; width: 100%;"></div></div></div></div><iframe aria-hidden="true" frameborder="0" style="z-index: -1; position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; border: none;" src="about:blank"></iframe><div style="margin-left: 5px; margin-right: 5px; z-index: 1000000; position: absolute; left: 0px; bottom: 0px;"><a target="_blank" rel="noopener" href="https://maps.google.com/maps?ll=12.975794,79.162505&amp;z=16&amp;t=m&amp;hl=en-IN&amp;gl=US&amp;mapclient=apiv3" title="Click to see this area on Google Maps" style="position: static; overflow: visible; float: none; display: inline;"><div style="width: 66px; height: 26px; cursor: pointer;"><img alt="" src="https://maps.gstatic.com/mapfiles/api-3/images/google4.png" draggable="false" style="position: absolute; left: 0px; top: 0px; width: 66px; height: 26px; user-select: none; border: 0px; padding: 0px; margin: 0px;"></div></a></div><div style="background-color: white; padding: 15px 21px; border: 1px solid rgb(171, 171, 171); font-family: Roboto, Arial, sans-serif; color: rgb(34, 34, 34); box-sizing: border-box; box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 16px; z-index: 10000002; display: none; width: 300px; height: 180px; position: absolute; left: 444px; top: 260px;"><div style="padding: 0px 0px 10px; font-size: 16px;">Map Data</div><div style="font-size: 13px;">Map data ©2018 Google</div><div style="width: 13px; height: 13px; overflow: hidden; position: absolute; opacity: 0.7; right: 12px; top: 12px; z-index: 10000;"><img alt="" src="https://maps.gstatic.com/mapfiles/api-3/images/mapcnt6.png" draggable="false" style="position: absolute; left: -2px; top: -336px; width: 59px; height: 492px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none;"></div><img alt="" src="https://maps.gstatic.com/mapfiles/transparent.png" draggable="false" style="width: 37px; height: 37px; user-select: none; border: 0px; padding: 0px; margin: 0px; position: absolute; right: 0px; top: 0px; z-index: 10001; cursor: pointer;"></div><div class="gmnoprint" style="z-index: 1000001; position: absolute; right: 0px; bottom: 0px; width: 121px;"><div draggable="false" class="gm-style-cc" style="user-select: none; height: 14px; line-height: 14px;"><div style="opacity: 0.7; width: 100%; height: 100%; position: absolute;"><div style="width: 1px;"></div><div style="background-color: rgb(245, 245, 245); width: auto; height: 100%; margin-left: 1px;"></div></div><div style="position: relative; padding-right: 6px; padding-left: 6px; font-family: Roboto, Arial, sans-serif; font-size: 10px; color: rgb(68, 68, 68); white-space: nowrap; direction: ltr; text-align: right; vertical-align: middle; display: inline-block;"><a style="text-decoration: none; cursor: pointer; display: none;">Map Data</a><span>Map data ©2018 Google</span></div></div></div><div class="gmnoscreen" style="position: absolute; right: 0px; bottom: 0px;"><div style="font-family: Roboto, Arial, sans-serif; font-size: 11px; color: rgb(68, 68, 68); direction: ltr; text-align: right; background-color: rgb(245, 245, 245);">Map data ©2018 Google</div></div><div class="gmnoprint gm-style-cc" draggable="false" style="z-index: 1000001; user-select: none; height: 14px; line-height: 14px; position: absolute; right: 0px; bottom: 0px;"><div style="opacity: 0.7; width: 100%; height: 100%; position: absolute;"><div style="width: 1px;"></div><div style="background-color: rgb(245, 245, 245); width: auto; height: 100%; margin-left: 1px;"></div></div><div style="position: relative; padding-right: 6px; padding-left: 6px; font-family: Roboto, Arial, sans-serif; font-size: 10px; color: rgb(68, 68, 68); white-space: nowrap; direction: ltr; text-align: right; vertical-align: middle; display: inline-block;"><a href="https://www.google.com/intl/en-IN_US/help/terms_maps.html" target="_blank" rel="noopener" style="text-decoration: none; cursor: pointer; color: rgb(68, 68, 68);">Terms of Use</a></div></div><button draggable="false" title="Toggle fullscreen view" aria-label="Toggle fullscreen view" type="button" class="gm-control-active gm-fullscreen-control" style="background: none rgb(255, 255, 255); border: 0px; margin: 10px; padding: 0px; position: absolute; cursor: pointer; user-select: none; border-radius: 2px; height: 40px; width: 40px; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; overflow: hidden; top: 0px; right: 0px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%20018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%2C0v2v4h2V2h4V0H2H0z%20M16%2C0h-4v2h4v4h2V2V0H16z%20M16%2C16h-4v2h4h2v-2v-4h-2V16z%20M2%2C12H0v4v2h2h4v-2H2V12z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%2C0v2v4h2V2h4V0H2H0z%20M16%2C0h-4v2h4v4h2V2V0H16z%20M16%2C16h-4v2h4h2v-2v-4h-2V16z%20M2%2C12H0v4v2h2h4v-2H2V12z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%2C0v2v4h2V2h4V0H2H0z%20M16%2C0h-4v2h4v4h2V2V0H16z%20M16%2C16h-4v2h4h2v-2v-4h-2V16z%20M2%2C12H0v4v2h2h4v-2H2V12z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 11px;"></button><div class="gmnoprint gm-bundled-control gm-bundled-control-on-bottom" draggable="false" controlwidth="40" controlheight="81" style="margin: 10px; user-select: none; position: absolute; bottom: 81px; right: 40px;"><div class="gmnoprint" controlwidth="40" controlheight="81" style="position: absolute; left: 0px; top: 0px;"><div draggable="false" style="user-select: none; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-radius: 2px; cursor: pointer; background-color: rgb(255, 255, 255); width: 40px; height: 81px;"><button draggable="false" title="Zoom in" aria-label="Zoom in" type="button" class="gm-control-active" style="background: none; display: block; border: 0px; margin: 0px; padding: 0px; position: relative; cursor: pointer; user-select: none; overflow: hidden; width: 40px; height: 40px; top: 0px; left: 0px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpolygon%20fill%3D%22%23666%22%20points%3D%2218%2C7%2011%2C7%2011%2C0%207%2C0%207%2C7%200%2C7%200%2C11%207%2C11%207%2C18%2011%2C18%2011%2C11%2018%2C11%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 9px 11px 13px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpolygon%20fill%3D%22%23333%22%20points%3D%2218%2C7%2011%2C7%2011%2C0%207%2C0%207%2C7%200%2C7%200%2C11%207%2C11%207%2C18%2011%2C18%2011%2C11%2018%2C11%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 9px 11px 13px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpolygon%20fill%3D%22%23111%22%20points%3D%2218%2C7%2011%2C7%2011%2C0%207%2C0%207%2C7%200%2C7%200%2C11%207%2C11%207%2C18%2011%2C18%2011%2C11%2018%2C11%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 9px 11px 13px;"></button><div style="position: relative; overflow: hidden; width: 30px; height: 1px; margin: 0px 5px; background-color: rgb(230, 230, 230); top: 0px;"></div><button draggable="false" title="Zoom out" aria-label="Zoom out" type="button" class="gm-control-active" style="background: none; display: block; border: 0px; margin: 0px; padding: 0px; position: relative; cursor: pointer; user-select: none; overflow: hidden; width: 40px; height: 40px; top: 0px; left: 0px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%2C7h18v4H0V7z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 13px 11px 9px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%2C7h18v4H0V7z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 13px 11px 9px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%2C7h18v4H0V7z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 18px; width: 18px; margin: 13px 11px 9px;"></button></div></div></div><div class="gmnoprint gm-bundled-control gm-bundled-control-on-bottom" draggable="false" controlwidth="0" controlheight="0" style="margin: 10px; user-select: none; position: absolute; display: none; bottom: 0px; left: 0px;"><div class="gmnoprint" controlwidth="40" controlheight="40" style="display: none; position: absolute;"><div style="width: 40px; height: 40px;"><button draggable="false" title="Rotate map 90 degrees" aria-label="Rotate map 90 degrees" type="button" class="gm-control-active" style="background: none rgb(255, 255, 255); display: none; border: 0px; margin: 0px 0px 32px; padding: 0px; position: relative; cursor: pointer; user-select: none; width: 40px; height: 40px; top: 0px; left: 0px; overflow: hidden; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-radius: 2px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2222%22%20viewBox%3D%220%200%2024%2022%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20fill-rule%3D%22evenodd%22%20d%3D%22M20%2010c0-5.52-4.48-10-10-10s-10%204.48-10%2010v5h5v-5c0-2.76%202.24-5%205-5s5%202.24%205%205v5h-4l6.5%207%206.5-7h-4v-5z%22%20clip-rule%3D%22evenodd%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 28px; width: 28px; margin: 6px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2222%22%20viewBox%3D%220%200%2024%2022%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20fill-rule%3D%22evenodd%22%20d%3D%22M20%2010c0-5.52-4.48-10-10-10s-10%204.48-10%2010v5h5v-5c0-2.76%202.24-5%205-5s5%202.24%205%205v5h-4l6.5%207%206.5-7h-4v-5z%22%20clip-rule%3D%22evenodd%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 28px; width: 28px; margin: 6px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2222%22%20viewBox%3D%220%200%2024%2022%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20fill-rule%3D%22evenodd%22%20d%3D%22M20%2010c0-5.52-4.48-10-10-10s-10%204.48-10%2010v5h5v-5c0-2.76%202.24-5%205-5s5%202.24%205%205v5h-4l6.5%207%206.5-7h-4v-5z%22%20clip-rule%3D%22evenodd%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="height: 28px; width: 28px; margin: 6px;"></button><button draggable="false" title="Tilt map" aria-label="Tilt map" type="button" class="gm-tilt gm-control-active" style="background: none rgb(255, 255, 255); display: block; border: 0px; margin: 0px; padding: 0px; position: relative; cursor: pointer; user-select: none; width: 40px; height: 40px; top: 0px; left: 0px; overflow: hidden; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-radius: 2px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2018%2016%22%3E%0A%20%20%3Cpath%20fill%3D%22%23666%22%20d%3D%22M0%2C16h8V9H0V16z%20M10%2C16h8V9h-8V16z%20M0%2C7h8V0H0V7z%20M10%2C0v7h8V0H10z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="width: 18px; height: 16px; margin: 12px 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2018%2016%22%3E%0A%20%20%3Cpath%20fill%3D%22%23333%22%20d%3D%22M0%2C16h8V9H0V16z%20M10%2C16h8V9h-8V16z%20M0%2C7h8V0H0V7z%20M10%2C0v7h8V0H10z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="width: 18px; height: 16px; margin: 12px 11px;"><img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2218px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2018%2016%22%3E%0A%20%20%3Cpath%20fill%3D%22%23111%22%20d%3D%22M0%2C16h8V9H0V16z%20M10%2C16h8V9h-8V16z%20M0%2C7h8V0H0V7z%20M10%2C0v7h8V0H10z%22%2F%3E%0A%3C%2Fsvg%3E%0A" style="width: 18px; height: 16px; margin: 12px 11px;"></button></div></div></div></div></div></div>
        </div>
      </div><!-- END OF MAP -->



  <!-- Modal About -->
 <div class="modal fade" id="modal-about" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog">
     <div class="modal-content">
       <div class="modal-body">
           <div class="row">
               <div class="col-md-12 col-xs-12 text-center">
                   <img width="250" src="img/agos_ebayanihan_logo_splash.png" alt="Agos-eBayanihan">
               </div>
               <div class="col-md-12 col-xs-12">
                   <p>
                       <b>Agos</b> is a collaborative platform that combines top-down government action with bottom up civic engagement to help communities mitigate risks and deal with climate change and natural hazards.
                       Using mobile and web technologies and social media, it ensures the flow of critical and actionable information to those who need it before, during, and after disasters and connects those who need help directly with those who can truly help.
                       Powered by the bayanihan spirit, it mobilizes different sectors of society and transforms ordinary citizens into movers who are helping build a more resilient nation.
                   </p>
               </div>
           </div>
         <div class="modal-footer">
         <div class="btn-report"><a href="#" data-dismiss="modal" onclick="create_a_report()">Report</a></div>
         <div class="btn-close" data-dismiss="modal">Close and Continue</div>
         </div>
       </div>
     </div>
   </div>
 </div> <!-- End of Modal About -->

  <!-- Modal Info -->
  

   <!-- Modal About2 -->
 <div class="modal fade" id="modal-about-responive" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog">
     <div class="modal-content">
       <div class="modal-body">
         <div class="text-center">
            <img src="/img/agos-ebayanihan-logo-lg.png" alt="Agos-eBayanihan" style="margin-bottom:15px;width:40%;">
         </div>
         <p><b>Agos</b> is a collaborative platform that combines top-down government action with bottom up civic engagement to help communities mitigate risks and deal with climate change and natural hazards. Using mobile and web technologies and social media, it ensures the flow of critical and actionable information to those who need it before, during, and after disasters and connects those who need help directly with those who can truly help. Powered by the bayanihan spirit, it mobilizes different sectors of society and transforms ordinary citizens into movers who are helping build a more resilient nation.</p>
         <div class="modal-footer">
          <a href="/report" class="btn-gray btn-lg btn-report">Report</a>
          <div class="btn-close btn-white btn-lg" data-dismiss="modal">Close and Continue</div>
         </div>
       </div>
     </div>
   </div>
 </div> <!-- End of Modal About2 -->

<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
    -->
    <script src="/js/jquery-1.10.2.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/underscore.js"></script>
    <script src="/js/moment.js"></script>

    <!-- Scroll to fixed -->
    <script src="/js/scrolltofixed.js" type="text/javascript"></script>

    <!-- Flip Switch -->
    <script src="/js/jquery.switchButton.js" type="text/javascript"></script>

     <!-- Nice Scroll Files -->
    <script src="/js/jquery.nicescroll.min.js" type="text/javascript"></script>

    <!-- Custom Form Elements -->
    <script src="/js/custom-form-elements.js" type="text/javascript"></script><style type="text/css">input.styled { display: none; } select.styled { position: relative; width: 190px; opacity: 0; filter: alpha(opacity=0); z-index: 5; } .disabled { opacity: 0.5; filter: alpha(opacity=50); }</style>

    <!-- Custom File Upload -->
    <script src="/js/jQuery.fileinput.js" type="text/javascript"></script>

    <!-- Custom Script  -->
    <script src="/js/custom.js" type="text/javascript"></script>
    <script src="/js/main.js"></script>
    <script src="/js/notify.js"></script>

    <!-- GIGYA -->

    <script type="text/javascript">
    

    function onLoginHandler(eventObj) {
        var params = {
            siteUID: "4",
            timestamp: "1538400355.56",
            cid:'',
            signature: "/D/Hc0ZYv6UpdRLVxBWa68t/IrI="
        };
        gigya.socialize.notifyRegistration(params);
        console.log(eventObj);
    }

    </script>
    <!-- Google Map -->
    <script src="https://maps-api-ssl.google.com/maps/api/js?v=3.17&amp;libraries=places&amp;key=AIzaSyDgYVf8xEExWwwjGMKSs4dg7BBeRD9a5KY
&amp;sensor=true"></script>
    <script src="/js/markerclusterer.js"></script>
    <!-- <script src="/js/spidermarker.js"></script> -->

    <script>
      var first = true;
      var fetching_data = false;
      var map;
      window.current_report_type = "ALL";
      window.current_report_sort = "DATE_DOWN";
      window.current_report_verified = "ALL";

      
      window.current_tags_string = null;
      

      function zoom_in_to_coords(coords){
        window.this_map.setZoom(16);
        window.this_map.panTo(coords);

        window.this_map2.setZoom(16);
        window.this_map2.panTo(coords);

        if(window.current_marker){
          window.current_marker.setPosition(coords);
          adjust_map();
          latlong = window.current_marker.getPosition();
          get_address_from_lat_lng(latlong.lat(), latlong.lng());
        }
      }


      var renderReportBoundingBoxTimeout = null;
      var renderDatasetBoundingBoxTimeout = null;
      function initialize() {
        
        var default_lat = 12.683152;
        var default_lng = 122.730924;
        var default_zoom = 6
        
        var mapOptions = {
          zoom: default_zoom,
          minZoom: 5,
          center: new google.maps.LatLng(default_lat, default_lng),
          zoomControl:true,
          panControl: false,
          streetViewControl:false,
          mapTypeControl: false
        };
        map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
        window.this_map = map;
        /*window.oms = new OverlappingMarkerSpiderfier(window.this_map);*/


        var input = /** @type {HTMLInputElement} */(
            document.getElementById('search-location-input'));

        var searchBox = new google.maps.places.SearchBox(
          /** @type {HTMLInputElement} */(input));

        // hb
        var input2 = /** @type {HTMLInputElement} */(
            document.getElementById('search-location-input-2'));

        var searchBox2 = new google.maps.places.SearchBox(
          /** @type {HTMLInputElement} */(input2));
        // end hb

        var bounds = new google.maps.LatLngBounds(
            new google.maps.LatLng(5.000000000, 115.000000000),
            new google.maps.LatLng(20.000000000, 130.000000000));
        searchBox.setBounds(bounds);

        google.maps.event.addListener(searchBox, 'places_changed', function(){
          var places = searchBox.getPlaces();
          if (places.length == 0){
            return;
          }
          console.log(places[0]);
          console.log(places[0].geometry);
          if(places[0].geometry){
            var new_coords = places[0].geometry.location;
            if(new_coords){
              zoom_in_to_coords(new_coords);
            }
          }
        });

        google.maps.event.addListener(searchBox2, 'places_changed', function(){
          var places = searchBox2.getPlaces();
          if (places.length == 0){
            return;
          }
          console.log(places[0]);
          console.log(places[0].geometry);
          if(places[0].geometry){
            var new_coords = places[0].geometry.location;
            if(new_coords){
              zoom_in_to_coords(new_coords);
            }
          }
        });

        // map.addListener("zoom_changed", function(e) {
          // if($(window).width() > 1024) {
            // fetching_data = true;
            // try {
              // clearTimeout(renderReportBoundingBoxTimeout);
            //   clearTimeout(renderDatasetBoundingBoxTimeout);
            // } catch(ex) {
            //   console.log(ex);
            // }
        //     renderReportBoundingBoxTimeout = setTimeout(function() { MapSwitcher(); }, 700);
        //     renderDatasetBoundingBoxTimeout = setTimeout(function() { DatasetsMapSwitcher(); }, 700);
        //   }
        // });


        // map.addListener("dragend", function(e) {
        //   if($(window).width() > 1024) {
        //     fetching_data = true;
            // try {
              // clearTimeout(renderReportBoundingBoxTimeout);
              // clearTimeout(renderDatasetBoundingBoxTimeout);
        //       renderReportBoundingBoxTimeout = setTimeout(function() { MapSwitcher(); }, 700);
            //   renderDatasetBoundingBoxTimeout = setTimeout(function() { DatasetsMapSwitcher(); }, 700);
            // } catch(ex) {
            //   console.log(ex);
            // }
        //   }
        // });

        // initialize second map
        map2 = new google.maps.Map(document.getElementById('map-canvas-2'),
            mapOptions);
        window.this_map2 = map2;
        // end

        // map2.addListener("zoom_changed", function(e) {
        //   if($(window).width() < 1025) {
        //     fetching_data = true;
        //     MapSwitcher();
        //     DatasetsMapSwitcher();
        //   }
        // });
        //
        // map2.addListener("dragend", function(e) {
        //   if($(window).width() < 1025) {
        //     fetching_data = true;
        //     MapSwitcher();
        //     DatasetsMapSwitcher();
        //   }
        // });

        fetch_reports();
        
        fetch_data();
        get_user_location();
        
      }

      google.maps.event.addDomListener(window, 'load', initialize);

      function MapSwitcher() {
        try {
          if($(window).width() > 1024) {
            sw = window.this_map.getBounds().getSouthWest();
            ne = window.this_map.getBounds().getNorthEast();
            get_reports_in_square(sw, ne, window.this_map);
          }
          else if($(window).width() < 1025) {
            sw = window.this_map2.getBounds().getSouthWest();
            ne = window.this_map2.getBounds().getNorthEast();
            get_reports_in_square(sw, ne, window.this_map2);
          }
        } catch(ex) {
          console.log(ex);
            setTimeout(function() {MapSwitcher();}, 1000);
        }
      }

      function DatasetsMapSwitcher() {
        try {
          if($(window).width() > 1024) {
            sw = window.this_map.getBounds().getSouthWest();
            ne = window.this_map.getBounds().getNorthEast();
            get_datasets_in_square(sw, ne, window.this_map.zoom);
          }
          else if($(window).width() < 1025) {
            sw = window.this_map2.getBounds().getSouthWest();
            ne = window.this_map2.getBounds().getNorthEast();
            get_datasets_in_square(sw, ne, window.this_map2.zoom);
          }
        } catch(ex) {
          console.log(ex);
          render_data_options();
        }
      }



      function get_reports_in_square(sw, ne, _map) {
        // _data = {"sw_lat": sw.lat(), "sw_lng": sw.lng(), "ne_lat": ne.lat(), "ne_lng": ne.lng(), "zoom": _map.zoom, "dis": distance(sw.lat(), sw.lng(), ne.lat(), ne.lng(), "M2"), "lat": _map.center.A, "lng": _map.center.F};
        // if (window.current_tags_string) {
        //   _data["tags"] = window.current_tags_string;
        // }
        // $.ajax({
        //   type: "POST",
        //   contentType: "application/json",
        //   dataType: 'json',
        //   url: "/api/v3/geo_report_server",
        //   data: _data,
        //   success: function(response) {
        //     if (response.code == 500) {
        //       for(_index in window.reports) {
        //         if (window.bound_box_report_lists.indexOf(window.reports[_index].id) == -1) {
        //           window.bound_box_report_lists.push(window.reports[_index].id);
        //         }
        //       }
        //     } else {
        //       for(_index in response.content) {
        //         if (window.bound_box_report_lists.indexOf(response.content[_index]["report_id"]) == -1) {
        //           window.bound_box_report_lists.push(response.content[_index]["report_id"]);
        //         }
        //       }
        //     }
        //     render_reports(first);
        //     first = false;
        //   },
        //   error: function(err) {
        //     console.log(err);
        //   }
        // });

        // first = false  // do not render first info on load.
        
        render_reports(false);
        
      }

      function distance(lat1, lon1, lat2, lon2, unit) {
        var radlat1 = Math.PI * lat1/180;
        var radlat2 = Math.PI * lat2/180;
        var radlon1 = Math.PI * lon1/180;
        var radlon2 = Math.PI * lon2/180;
        var theta = lon1-lon2;
        var radtheta = Math.PI * theta/180;
        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
        dist = Math.acos(dist);
        dist = dist * 180/Math.PI;
        dist = dist * 60 * 1.1515;
        if (unit=="K") { dist = dist * 1.609344 };
        if (unit=="N") { dist = dist * 0.8684 };
        if (unit=="M") { dist = dist * 1609.344 };
        if (unit=="M2") { dist = (dist * 1609.344) / 2 };
        return dist;
      }

      function ListUniquify(value, index, self) {
          return self.indexOf(value) === index;
      }
    </script>

    <script type="text/javascript">

    function get_current_map_url(){
      var zoom = window.this_map.getZoom();
      var latlng = window.this_map.getCenter();

      var lat = latlng.lat();
      var lng = latlng.lng();

      var url = window.location.origin + '/location/' + zoom + '/' + lat + '/' + lng;
      console.log(url);
      return url;
    }


    function create_map_view(){
      var map_view_name = prompt("Please enter the map view url name");
      if(map_view_name){
        var zoom = window.this_map.getZoom();
        var latlng = window.this_map.getCenter();
        var lat = latlng.lat();
        var lng = latlng.lng();

        var post_data = {'zoom': zoom, 'lat': lat, 'lng': lng, 'map_link_name': map_view_name};

        $.ajax({
          url: '/admin2/map_links',
          type: 'POST',
          data: post_data,
          success: function(data) {
            console.log(data);
            window.location = data.url;
          },
          error: function(request, status, error) {
            console.log(request.responseText);
            alert(request.responseText);
          }
        });
      }
    }


    function facebook_share(){
      
      var url = "http://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(get_current_map_url());
      
      var win = window.open(url, '_blank');
      win.focus();
    }


    function twitter_share(){
      
      var url = "https://twitter.com/intent/tweet?via=agos&url=" + encodeURIComponent(get_current_map_url());
      
      url += '&text=' + encodeURIComponent('Check out our crowdsourced Agos map as tropical cyclone moves through the PH');
      var win = window.open(url, '_blank');
      win.focus();
    }


    function get_user_location(){
      navigator.geolocation.getCurrentPosition(success);

      function success(position) {
        window.current_user_location = {};
        window.current_user_location.lat = position.coords.latitude;
        window.current_user_location.lng = position.coords.longitude;
        zoom_user_location();
        /*zoom_in_to_coords(new google.maps.LatLng(window.current_user_location.lat, window.current_user_location.lng));*/
      }
    }

    function zoom_user_location(){
        if(window.current_user_location){
            zoom_in_to_coords(new google.maps.LatLng(window.current_user_location.lat, window.current_user_location.lng));
            myLatlng = new google.maps.LatLng(window.current_user_location.lat, window.current_user_location.lng);

            var marker = new google.maps.Marker({
                position: myLatlng,
                map: window.this_map,
                animation: google.maps.Animation.DROP,
                title: 'Your Location'
            });
            window.current_user_marker = marker;
            adjust_map();
        }
    }

    function refresh_records(){
      /*if(window.selected_report === null && !window.creating_a_report){
        fetch_reports();
      }
      else {
        done_loading();
      }*/
    }


    function replaceAll(find, replace, str) {
      return str.replace(new RegExp(find, 'g'), replace);
    }


    function get_adjustment_h(){
      return ((Math.max(document.documentElement.clientHeight, window.innerHeight || 0)/3))
    }


    function get_adjustment_w(){
      return 0;
    }


    function adjust_map(){
      window.this_map.panBy(get_adjustment_w(), -get_adjustment_h());
      window.this_map2.panBy(get_adjustment_w(), -get_adjustment_h());
    }


    function create_a_report(){
      console.log("create_a_report()");

      close_all_info_windows();
      clear_info_window(false);
      $(".report_item").removeClass("highlight");
      window.creating_a_report = true;

      
      $("#rpl_auth_container").click();
      return
      


      contentString = $("#create-a-report-form").html();

      if(window.current_user_location){
        contentString = replaceAll("%%top_warning%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%top_warning%%", '<div class="top-warning"><p>Please <b>ALLOW</b> us to track your location first so we can respond accurately to your alert.</p></div>', contentString);
      }


      var myLatlng = window.this_map.getCenter();

      if(window.this_map.getZoom() < 16){
        if(window.current_user_location){
          zoom_in_to_coords(new google.maps.LatLng(window.current_user_location.lat, window.current_user_location.lng));
          myLatlng = new google.maps.LatLng(window.current_user_location.lat, window.current_user_location.lng);
        }
      }


      var marker = new google.maps.Marker({
          position: myLatlng,
          map: window.this_map,
          draggable: true,
          animation: google.maps.Animation.DROP,
          title: 'Create a Report'
      });


      google.maps.event.addListener(marker, 'dragend', function()
        {
            marker.setAnimation(google.maps.Animation.DROP);
            window.this_map.panTo(marker.getPosition());
            adjust_map();
            latlong = marker.getPosition();
            get_address_from_lat_lng(latlong.lat(), latlong.lng());
            $("#write-your-report-here").focus();
        });

      marker.infowindow =  new google.maps.InfoWindow({
          content: contentString
      });

      marker.infowindow.open(window.this_map,marker);

      window.current_user_marker.setMap(null);
      window.current_user_marker = null;
      window.current_marker = marker;

      get_address_from_lat_lng(myLatlng.lat(), myLatlng.lng());
      adjust_map();

      google.maps.event.addListener(marker.infowindow, 'domready', function(){
          $(".gm-style-iw").next("div").hide();
      });

      $("#write-your-report-here").focus();
    }

    

    function delete_current_marker(){
      if(window.current_marker){
        if(window.current_marker.infowindow){
           window.current_marker.infowindow.close();
        }
        window.current_marker.setMap(null);
        window.current_marker = null;
      }


    }

    function fetch_initial_report(report_id){
      $.getJSON( "/api/v2/reports/" + report_id + "?expand=owner", function(data) {
        console.log(data);

        var twitter = ["tweet","twitter"];
        var sms = ["sms","text","mobile","phone","chikka"];
        var computer = ["web","computer", "laptop"];
        var icon = "laptop";

        for(i=0; i<1; i++){
          var icon = "laptop";
          if(data.reports[i].source){
            if(twitter.indexOf(data.reports[i].source.toLowerCase()) > -1){
              icon = "twitter";
            }
            else if(sms.indexOf(data.reports[i].source.toLowerCase()) > -1){
              icon = "phone";
            }
          }

          window.reports[0] = {
            "id": data.reports[i].id,
            "content": data.reports[i].content,
            "created": data.reports[i].created,
            "current_user_vote": data.reports[i].current_user_vote,
            "key": data.reports[i].key,
            "lat": data.reports[i].lat,
            "lng": data.reports[i].lng,
            "location": data.reports[i].location,
            "owner": data.reports[i].owner,
            "photos": data.reports[i].photos,
            "responded": data.reports[i].responded,
            "responder": data.reports[i].responder,
            "source": data.reports[i].source,
            "special_report": data.reports[i].special_report,
            "type": data.reports[i].type,
            "verified": data.reports[i].verified,
            "verifier": data.reports[i].verifier,
            "vote_ups": data.reports[i].vote_ups,
            "replies": data.reports[i].replies,
            "voted": data.reports[i].current_user_vote,
            "icon": icon
          }
          fetch_comments(0);
        }
      });
    }

    window.selected_report = null;
    window.selected_sidebar = null;
    window.creating_a_report = false
    window.reports = [];
    window.current_report_length = 0;
    window.report_lists = new Object();
    window.bound_box_report_lists = [];

    

    function highlight_report_item(report_index){
      $(".report_item").removeClass("highlight");
      $("#specific_report_item_" + report_index).addClass("highlight");

      if(!window.selected_sidebar || window.selected_sidebar != report_index){
        window.selected_sidebar = report_index;
        try {
          $('#sidebar-report').animate({
              scrollTop: ($("#specific_report_item_" + report_index).offset().top - $('#sidebar-report').offset().top + $('#sidebar-report').scrollTop() - 100)
          }, 500);
        } catch(ex) {
          console.log(ex);
        }
      }
    }


    function specific_report(report_index, not_from_click){
      window.selected_report = report_index;
      close_all_info_windows();
      if (!not_from_click) {
        fetching_data = false;
        render_markers();
      } else {
        clear_info_window(fetching_data);
      }

      highlight_report_item(report_index);

      if(window.reports[report_index].marker){
        console.log("render_info_window(" + report_index + ")");
        if(window.reports[report_index].marker){
          if(window.this_map.getZoom() < 16){
            zoom_in_to_coords(window.reports[report_index].marker.getPosition());
            adjust_map();
          }
          else {
            window.this_map.panTo(window.reports[report_index].marker.getPosition());
            adjust_map();
          }
          render_info_window(report_index);
          render_info_window2(report_index);
        }
      }

      setTimeout(function() { $(".modal-body").css("padding",  "19px"); }, 1000);
    }


    function close_all_info_windows(){
      if(window.selected_report === null){
        // do nothing
      }
      else {
        fetch_comments(window.selected_report);
        try {
            window.reports[window.selected_report].marker.infowindow.close();
        } catch(e) {
          console.log(e);
          clear_info_window(false);
        }
        try {
            window.reports[window.selected_report].marker2.infowindow.close();
        } catch(e) {
          console.log(e);
          clear_info_window(false);
        }

        window.selected_report = null;
      }

      window.creating_a_report = false;

      delete_current_marker();
    }


    function toTitleCase(str) {
        return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
    }


    function truncateString(string, limit, breakChar, rightPad) {
        if (string.length <= limit) return string;

        var substr = string.substr(0, limit);
        if ((breakPoint = substr.lastIndexOf(breakChar)) >= 0) {
            if (breakPoint < string.length -1) {
                return string.substr(0, breakPoint) + rightPad;
            }
        }

        return string;

    }


    function render_info_window(report_index){
      contentString = $("#specific-report").html();
      contentString = replaceAll("%%content%%", window.reports[report_index].content, contentString);

      contentString = replaceAll("%%content_share%%", encodeURIComponent(truncateString(window.reports[report_index].content, 110, ' ', '...')), contentString);

      if(!window.reports[report_index].verified){
        contentString = replaceAll("%%not_verified%%", "hide", contentString);
      }
      else {
        contentString = replaceAll("%%not_verified%%", "", contentString);
      }

      if(!window.reports[report_index].owner.official){
        contentString = replaceAll("%%official%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%official%%", '<img src="/img/ico-official.svg" class="official-user" title="Verified" alt="Verified">', contentString);
      }

      if(!window.reports[report_index].verified){
        contentString = replaceAll("%%verifier_text%%", "hide", contentString);
      }
      else {
        contentString = replaceAll("%%verifier_text%%", "Verified by " + window.reports[report_index].verifier, contentString);
      }

      contentString = replaceAll("%%icon%%", window.reports[report_index].icon, contentString);

      if (window.reports[report_index].type == "info" || window.reports[report_index].type == "flood" || window.reports[report_index].type == "rescue") {
        contentString = replaceAll("%%type%%", toTitleCase(window.reports[report_index].type) + " Alert", contentString);
      } else {
        contentString = replaceAll("%%type%%", toTitleCase(window.reports[report_index].type), contentString);
      }

      contentString = replaceAll("%%type_lower%%", window.reports[report_index].type.toLowerCase(), contentString);

      if(window.reports[report_index].replies == 1){
        contentString = replaceAll("%%replies%%", window.reports[report_index].replies + " reply ", contentString);
      }
      else {
        contentString = replaceAll("%%replies%%", window.reports[report_index].replies + " replies ", contentString);
      }

      if(window.reports[report_index].location){
        contentString = replaceAll("%%location%%", window.reports[report_index].location, contentString);
        contentString = replaceAll("%%nolocation%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%location%%", "", contentString);
        contentString = replaceAll("%%nolocation%%", "hide", contentString);
      }

      

      contentString = replaceAll("%%id%%", window.reports[report_index].id, contentString);

      if(window.reports[report_index].photos.length >= 1){
        if(window.reports[report_index].photos[0]){
          contentString = replaceAll("%%photo%%", '<img src="' + window.reports[report_index].photos[0] + '" />', contentString);
        }
        else{
          contentString = replaceAll("%%photo%%", '', contentString);
        }
        contentString = replaceAll("%%photo_url%%", window.reports[report_index].photos[0], contentString);
      }
      else {
        contentString = replaceAll("%%photo%%", "", contentString);
        contentString = replaceAll("%%photo_url%%", window.reports[report_index].photos[0], contentString);
      }

      contentString = replaceAll("%%timestamp%%", moment.unix(window.reports[report_index].created).fromNow(), contentString);

      if(window.reports[report_index].owner){
        contentString = replaceAll("%%owner%%", window.reports[report_index].owner.name, contentString);
        contentString = replaceAll("%%noowner%%", "", contentString);
      }
      else if(window.reports[report_index].name && window.reports[report_index].source.toUpperCase() == 'TWITTER'){
        contentString = replaceAll("%%owner%%", '@' + window.reports[report_index].name, contentString);
        contentString = replaceAll("%%noowner%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%owner%%", "Unknown", contentString);
        contentString = replaceAll("%%noowner%%", "hide", contentString);
      }

      contentString = replaceAll("%%vote_ups%%", window.reports[report_index].vote_ups, contentString);

      contentString = replaceAll("%%index%%", report_index, contentString);

      comments_string = render_comments(report_index)

      contentString = replaceAll("%%comments%%", comments_string, contentString);

      window.reports[report_index].marker.infowindow = new google.maps.InfoWindow({
          content: contentString
      });

      window.reports[report_index].marker.infowindow.open(window.this_map,window.reports[report_index].marker);

      window.selected_report = report_index;

      google.maps.event.addListener(window.reports[report_index].marker.infowindow, 'domready', function(){
          $(".gm-style-iw").next("div").hide();
      });

      // setTimeout(function(){$('.fancybox').fancybox(); }, 2000);

    }

    function render_info_window2(report_index){
      contentString = $("#specific-report").html();

      contentString = replaceAll("%%content%%", window.reports[report_index].content, contentString);

      contentString = replaceAll("%%content_share%%", encodeURIComponent(truncateString(window.reports[report_index].content, 110, ' ', '...')), contentString);

      if(!window.reports[report_index].verified){
        contentString = replaceAll("%%not_verified%%", "hide", contentString);
      }
      else {
        contentString = replaceAll("%%not_verified%%", "", contentString);
      }

      if(!window.reports[report_index].owner.official){
        contentString = replaceAll("%%official%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%official%%", '<img src="/img/ico-official.svg" class="official-user" title="Verified" alt="Verified">', contentString);
      }

      if(!window.reports[report_index].verified){
        contentString = replaceAll("%%verifier_text%%", "hide", contentString);
      }
      else {
        contentString = replaceAll("%%verifier_text%%", "Verified by " + window.reports[report_index].verifier, contentString);
      }

      contentString = replaceAll("%%icon%%", window.reports[report_index].icon, contentString);

      if (window.reports[report_index].type == "info" || window.reports[report_index].type == "flood" || window.reports[report_index].type == "rescue") {
        contentString = replaceAll("%%type%%", toTitleCase(window.reports[report_index].type) + " Alert", contentString);
      } else {
        contentString = replaceAll("%%type%%", toTitleCase(window.reports[report_index].type), contentString);
      }

      contentString = replaceAll("%%type_lower%%", window.reports[report_index].type.toLowerCase(), contentString);

      if(window.reports[report_index].replies == 1){
        contentString = replaceAll("%%replies%%", window.reports[report_index].replies + " reply ", contentString);
      }
      else {
        contentString = replaceAll("%%replies%%", window.reports[report_index].replies + " replies ", contentString);
      }

      if(window.reports[report_index].location){
        contentString = replaceAll("%%location%%", window.reports[report_index].location, contentString);
        contentString = replaceAll("%%nolocation%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%location%%", "", contentString);
        contentString = replaceAll("%%nolocation%%", "hide", contentString);
      }

      contentString = replaceAll("%%id%%", window.reports[report_index].id, contentString);

      if(window.reports[report_index].photos.length >= 1){
        contentString = replaceAll("%%photo%%", '<img src="' + window.reports[report_index].photos[0] + '" />', contentString);
        contentString = replaceAll("%%photo_url%%", window.reports[report_index].photos[0], contentString);
      }
      else {
        contentString = replaceAll("%%photo%%", "", contentString);
        contentString = replaceAll("%%photo_url%%", window.reports[report_index].photos[0], contentString);
      }

      contentString = replaceAll("%%timestamp%%", moment.unix(window.reports[report_index].created).fromNow(), contentString);

      if(window.reports[report_index].owner){
        contentString = replaceAll("%%owner%%", window.reports[report_index].owner.name, contentString);
        contentString = replaceAll("%%noowner%%", "", contentString);
      }
      else if(window.reports[report_index].name && window.reports[report_index].source.toUpperCase() == 'TWITTER'){
        contentString = replaceAll("%%owner%%", '@' + window.reports[report_index].name, contentString);
        contentString = replaceAll("%%noowner%%", "", contentString);
      }
      else {
        contentString = replaceAll("%%owner%%", "Unknown", contentString);
        contentString = replaceAll("%%noowner%%", "hide", contentString);
      }

      contentString = replaceAll("%%vote_ups%%", window.reports[report_index].vote_ups, contentString);

      contentString = replaceAll("%%index%%", report_index, contentString);

      comments_string = render_comments(report_index)

      contentString = replaceAll("%%comments%%", comments_string, contentString);


      window.reports[report_index].marker2.infowindow = new google.maps.InfoWindow({
          content: contentString
      });

      window.reports[report_index].marker2.infowindow.open(window.this_map2,window.reports[report_index].marker2);

      window.selected_report = report_index;

      google.maps.event.addListener(window.reports[report_index].marker2.infowindow, 'domready', function(){
          $(".gm-style-iw").next("div").hide();
      });
    }

    function remove_markers(){
      if(window.reports){
        if(window.reports.length > 0){
          for(i=0; i<window.reports.length;i++){
            if(window.reports[i].marker){
              window.reports[i].marker.setMap(null);
            }

            if(window.reports[i].marker2){
              window.reports[i].marker2.setMap(null);
            }

          }
        }
      }
    }


    function get_final_lat_lng(latlng){
      var finalLatLng = latlng;

      if (window.reports.length != 0) {
          for (i=0; i < window.reports.length; i++) {
            if(window.reports[i].marker){
              var existingMarker = window.reports[i].marker;
              var pos = existingMarker.getPosition();

              //if a marker already exists in the same position as this marker
              if (latlng.equals(pos)) {
                  //update the position of the coincident marker by applying a small multipler to its coordinates
                  var newLat = latlng.lat() + (Math.random() -.5) / 15000;// * (Math.random() * (max - min) + min);
                  var newLng = latlng.lng() + (Math.random() -.5) / 15000;// * (Math.random() * (max - min) + min);
                  finalLatLng = new google.maps.LatLng(newLat,newLng);
              }
            }
          }
      }
      return finalLatLng;
    }

    function done_loading(){
      setTimeout(function(){refresh_records();}, 3000);

    }

    window.marker_list = ["INFO", "RESCUE", "FLOOD", "BRIDGE", "EARTHQUAKE", "EARTHQUAKE-EVACUATION-SITE", "FIRE", "LANDSLIDE", "RAIN", "RELIEF", "STORM-SURGE", "VOLCANIC-ERUPTION"];
    window.this_map_markers = {
      "INFO": null,
      "RESCUE": null,
      "FLOOD": null,
      "BRIDGE": null,
      "EARTHQUAKE": null,
      "EARTHQUAKE-EVACUATION-SITE": null,
      "FIRE": null,
      "LANDSLIDE": null,
      "RAIN": null,
      "RELIEF": null,
      "STORM-SURGE": null,
      "VOLCANIC-ERUPTION": null
    }

    window.this_map_markers2 = {
      "INFO": null,
      "RESCUE": null,
      "FLOOD": null,
      "BRIDGE": null,
      "EARTHQUAKE": null,
      "EARTHQUAKE-EVACUATION-SITE": null,
      "FIRE": null,
      "LANDSLIDE": null,
      "RAIN": null,
      "RELIEF": null,
      "STORM-SURGE": null,
      "VOLCANIC-ERUPTION": null
    }

    window.clusters_style = {
      "INFO": [{
        url: '/img/icon-info-alert-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-info.png'
      }],
      "RESCUE": [{
        url: '/img/icon-rescue-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-rescue.png'
      }],
      "FLOOD": [{
        url: '/img/icon-flood-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-flood.png'
      }],
      "BRIDGE": [{
        url: '/img/icon-bridge-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-bridge.png'
      }],
      "EARTHQUAKE": [{
        url: '/img/icon-earthquake-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-earthquake.png'
      }],
      "EARTHQUAKE-EVACUATION-SITE": [{
        url: '/img/icon-earthquake-evacuation-site-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-earthquake-evacuation-site.png'
      }],
      "FIRE": [{
        url: '/img/icon-fire-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-fire.png'
      }],
      "LANDSLIDE": [{
        url: '/img/icon-landslide-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-landslide.png'
      }],
      "RAIN": [{
        url: '/img/icon-rain-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-rain.png'
      }],
      "RELIEF": [{
        url: '/img/icon-relief-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-relief.png'
      }],
      "STORM-SURGE": [{
        url: '/img/icon-storm-surge-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-storm-surge.png'
      }],
      "VOLCANIC-ERUPTION": [{
        url: '/img/icon-volcanic-eruption-cluster.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-volcanic-eruption.png'
      }],
      "ACCIDENT": [{
        url: '/img/marker-accident.png',
        height: 40,
        width: 40,
        anchorIcon: [40, 20],
        anchorText: [-8,0],
        /*textColor: '#ff00ff',*/
        textSize: 11,
        markerIcon: '/img/marker-accident.png'
      }]
    };

    function clear_info_window(f_d) {
      if (!f_d) {
        for(index in window.marker_list) {
          if(window.this_map_markers[window.marker_list[index]]){
            window.this_map_markers[window.marker_list[index]].clearMarkers();
          }
          window.this_map_markers[window.marker_list[index]] = new MarkerClusterer(window.this_map, [], {styles: window.clusters_style[window.marker_list[index]], averageCenter: true, maxZoom: 15});


        // ------------------------------------- hb --2--------------------------------
          if(window.this_map_markers2[window.marker_list[index]]){
            window.this_map_markers2[window.marker_list[index]].clearMarkers();
          }
          window.this_map_markers2[window.marker_list[index]] = new MarkerClusterer(window.this_map2, [], {styles: window.clusters_style[window.marker_list[index]], averageCenter: true, maxZoom: 15});
        }
        // ---------------------------------- end -----------------------------------

        remove_markers();
      }
      fetching_data = false;
    }

    function render_markers(){
      fetching_data = false;
      clear_info_window(fetching_data);

      for (var i = 0; i < window.reports.length; i++) {
        var report = window.reports[i];
        // if (window.bound_box_report_lists.indexOf(parseInt(report.id)) > -1) {
          if(!report.lat){
            continue;
          }

          if(report.lat == "None"){
            continue;
          }

          try {
            image_url = window.clusters_style[report.type.toUpperCase()][0].markerIcon;
          } catch(ex) {
            console.log("alert!!! error in render_markers image_url markers..");
            image_url = "/img/marker-info.png";
          }

          image = {
              url: image_url,
              size: new google.maps.Size(27, 45),
              origin: new google.maps.Point(0,0),
              anchor: new google.maps.Point(12, 33)
          };

          var myLatLng = new google.maps.LatLng(parseFloat(report.lat), parseFloat(report.lng));

          var marker = new google.maps.Marker({
              position: get_final_lat_lng(myLatLng),
              map: window.this_map,
              icon: image,
              title: report.content
          });

          marker.report_index = i;

          // ------------------------------------- hb --------------------------
          var marker2 = new google.maps.Marker({
              position: get_final_lat_lng(myLatLng),
              map: window.this_map2,
              icon: image,
              title: report.content
          });

          marker2.report_index = i;
          // ------------------------------------- end ---------------------------

          google.maps.event.addListener(marker, 'click', function() {
            specific_report(this.report_index);
          });

          google.maps.event.addListener(marker2, 'click', function() {
            specific_report(this.report_index);
          });

          window.reports[i].marker = marker;

          window.reports[i].marker2 = marker2;

          window.this_map_markers[report.type.toUpperCase()].addMarker(marker);
          window.this_map_markers2[report.type.toUpperCase()].addMarker(marker);
        // }
      }

      done_loading();

    }

    function render_markers_second_map(){
      for(index in window.marker_list) {
        if(window.this_map_markers2[window.marker_list[index]]){
          window.this_map_markers2[window.marker_list[index]].clearMarkers();
        }
        window.this_map_markers2[window.marker_list[index]] = new MarkerClusterer(window.this_map2, [], {styles: window.clusters_style[window.marker_list[index]], averageCenter: true, maxZoom: 15});
      }

      remove_markers();

      for (var i = 0; i < window.reports.length; i++) {
        var report = window.reports[i];

        if(!report.lat){
          continue;
        }

        if(report.lat == "None"){
          continue;
        }

        try {
          image_url = window.clusters_style[report.type.toUpperCase()][0].markerIcon;
        } catch(ex) {
          console.log("alert!!! error in render_markers image_url markers..");
          image_url = "/img/marker-info.png";
        }

        image = {
            url: image_url,
            size: new google.maps.Size(27, 45),
            origin: new google.maps.Point(0,0),
            anchor: new google.maps.Point(12, 33)
        };

        var myLatLng = new google.maps.LatLng(parseFloat(report.lat), parseFloat(report.lng));

        var marker = new google.maps.Marker({
            position: get_final_lat_lng(myLatLng),
            map: window.this_map,
            icon: image,
            title: report.content
        });

        marker.report_index = i;

        google.maps.event.addListener(marker, 'click', function() {
          // specific_report(this.report_index);
        });

        window.reports[i].marker2 = marker;

        window.this_map_markers2[report.type.toUpperCase()].addMarker(marker);
      }
    }

    function append_new_markers(start_index){
      for (var i = start_index; i < window.reports.length; i++) {
          var report = window.reports[i];

          if(!report.lat){
            continue;
          }

          if(report.lat == "None"){
            continue;
          }

          try {
            image_url = window.clusters_style[report.type.toUpperCase()][0].markerIcon;
          } catch(ex) {
            console.log("alert!!! error in render_markers image_url markers..");
            image_url = "/img/marker-info.png";
          }

          image = {
              url: image_url,
              size: new google.maps.Size(27, 45),
              origin: new google.maps.Point(0,0),
              anchor: new google.maps.Point(12, 33)
          };

          var myLatLng = new google.maps.LatLng(parseFloat(report.lat), parseFloat(report.lng));

          var marker = new google.maps.Marker({
              position: get_final_lat_lng(myLatLng),
              map: window.this_map,
              icon: image,
              title: report.content
          });

          marker.report_index = i;

          google.maps.event.addListener(marker, 'click', function() {
            specific_report(this.report_index);
          });

          /*window.oms.addListener('click', function(marker, event) {
            specific_report(this.report_index);
          });*/

          window.reports[i].marker = marker;
          /*window.oms.addMarker(window.reports[i].marker);*/

          try {
            window.this_map_markers[report.type.toUpperCase()].addMarker(marker);
          }
          catch(e) {
            console.log(e);
          }
      }

    }

    var select_search_text = {
      "ALL": "All Reports",
      "FLOOD": "Flood Reports",
      "RESCUE": "Rescue Reports",
      "INFO": "Info Reports",
      "BRIDGE": "Bridge Reports",
      "EARTHQUAKE": "Earthquake Reports",
      "EARTHQUAKE-EVACUATION-SITE": "Earthquake Evacuation Site Reports",
      "FIRE": "Fire Reports",
      "LANDSLIDE": "Landslide Reports",
      "RAIN": "Rain Reports",
      "RELIEF": "Relief Reports",
      "STORM-SURGE": "Storm Surge Reports",
      "VOLCANIC-ERUPTION": "Volcanic Eruption Reports"
    }

    function reports_count(){
      var option = $("#report-list-options-2").val();
      var option2 = $("#report-list-options").val();
      $(".report-list-options option[value='"+ option2 +"']").html(select_search_text[option2] + " (" + window.current_report_length + ")");
      $(".report-list-options-2 option[value='"+ option2 +"']").html(select_search_text[option2] + " (" + window.current_report_length + ")");
    }

    function render_reports_template1(i) {
      var report_item_content = $("#report-item-template").html();
      report_item_content = replaceAll("%%content%%", window.reports[i].content, report_item_content);

      if(window.reports[i].source){
        report_item_content = replaceAll("%%source%%", window.reports[i].source.toLowerCase(), report_item_content);
      }
      else {
        report_item_content = replaceAll("%%source%%", "none", report_item_content);
      }

      report_item_content = replaceAll("%%timestamp%%", moment.unix(window.reports[i].created).fromNow(), report_item_content);

      report_item_content = replaceAll("%%icon%%", window.reports[i].icon, report_item_content);

      marker_image = '<img src="/img/marker-%%type%%.png" alt="">'

      if(window.reports[i].type == ""){
        window.reports[i].type = "INFO";
      }

      marker_image = replaceAll("%%type%%", window.reports[i].type.toLowerCase(), marker_image);

      if(window.reports[i].lat){
        if(window.reports[i].lat != "None"){
          report_item_content = replaceAll("%%marker_image%%", marker_image, report_item_content);
        }
        else {
          report_item_content = replaceAll("%%marker_image%%", "", report_item_content);
        }
      }
      else {
        if (window.reports[i].type != "") {
          report_item_content = replaceAll("%%marker_image%%", marker_image, report_item_content);
        } else {
          report_item_content = replaceAll("%%marker_image%%", "", report_item_content);
        }
      }

      if(window.reports[i].replies == 1){
        report_item_content = replaceAll("%%replies%%", window.reports[i].replies + " reply ", report_item_content);
        report_item_content = replaceAll("%%noreply%%", "", report_item_content);
      }
      else if(window.reports[i].replies > 1) {
        report_item_content = replaceAll("%%replies%%", window.reports[i].replies + " replies ", report_item_content);
        report_item_content = replaceAll("%%noreply%%", "", report_item_content);
      }
      else {
        report_item_content = replaceAll("%%replies%%", "", report_item_content);
        report_item_content = replaceAll("%%noreply%%", "hide", report_item_content);
      }

      if(!window.reports[i].verified){
        report_item_content = replaceAll("%%verifier_text%%", "", report_item_content);
      }
      else {
        report_item_content = replaceAll("%%verifier_text%%", "Verified by " + window.reports[i].verifier, report_item_content);
      }

      report_item_content = replaceAll("%%upvote_count%%", window.reports[i].vote_ups, report_item_content);

      report_item_content = replaceAll("%%type%%", window.reports[i].type.toLowerCase(), report_item_content);

      if(!window.reports[i].verified){
        report_item_content = replaceAll("%%not_verified%%", "hide", report_item_content);
      }

      if(window.reports[i].photos.length){
        report_item_content = replaceAll("%%photo%%", '<img src="' + window.reports[i].photos[0] + '" />', report_item_content);
        report_item_content = replaceAll("%%photo_url%%", window.reports[i].photos[0], report_item_content);
      }
      else {
        report_item_content = replaceAll("%%photo%%", '', report_item_content);
        report_item_content = replaceAll("%%photo_url%%", window.reports[i].photos[0], report_item_content);
      }

      report_item_content = replaceAll("%%index%%", i, report_item_content);

      report_item_content = replaceAll("%%content_share%%", encodeURIComponent(truncateString(window.reports[i].content, 110, ' ', '...')), report_item_content);

      report_item_content = replaceAll("%%id%%", window.reports[i].id, report_item_content);

      if(window.reports[i].closed){
        report_item_content = replaceAll("%%gray%%", 'make-gray', report_item_content);
        report_item_content = replaceAll("%%close_text%%", 'Closed', report_item_content);
      }
      else {
        report_item_content = replaceAll("%%gray%%", '', report_item_content);
        report_item_content = replaceAll("%%close_text%%", 'Close', report_item_content);
      }


      $("#report-list").append(report_item_content);
    }

    function render_reports_template2(i) {
      var report_item_content_2 = $("#report-item-template-2").html();
      report_item_content_2 = replaceAll("%%content%%", window.reports[i].content, report_item_content_2);

      if(window.reports[i].source){
        report_item_content_2 = replaceAll("%%source%%", window.reports[i].source.toLowerCase(), report_item_content_2);
      }
      else {
        report_item_content_2 = replaceAll("%%source%%", "none", report_item_content_2);
      }

      report_item_content_2 = replaceAll("%%timestamp%%", moment.unix(window.reports[i].created).fromNow(), report_item_content_2);

      report_item_content_2 = replaceAll("%%icon%%", window.reports[i].icon, report_item_content_2);

      marker_image = '<img src="/img/marker-%%type%%.png" alt="">'

      if(window.reports[i].type == ""){
        window.reports[i].type = "INFO";
      }

      marker_image = replaceAll("%%type%%", window.reports[i].type.toLowerCase(), marker_image);

      if(window.reports[i].lat){
        if(window.reports[i].lat != "None"){
          report_item_content_2 = replaceAll("%%marker_image%%", marker_image, report_item_content_2);
        }
        else {
          report_item_content_2 = replaceAll("%%marker_image%%", "", report_item_content_2);
        }
      }
      else {
        if (window.reports[i].type != "") {
          report_item_content_2 = replaceAll("%%marker_image%%", marker_image, report_item_content_2);
        } else {
          report_item_content_2 = replaceAll("%%marker_image%%", "", report_item_content_2);
        }
      }

      if(window.reports[i].replies == 1){
        report_item_content_2 = replaceAll("%%replies%%", window.reports[i].replies + " reply ", report_item_content_2);
        report_item_content_2 = replaceAll("%%noreply%%", "", report_item_content_2);
      }
      else if(window.reports[i].replies > 1) {
        report_item_content_2 = replaceAll("%%replies%%", window.reports[i].replies + " replies ", report_item_content_2);
        report_item_content_2 = replaceAll("%%noreply%%", "", report_item_content_2);
      }
      else {
        report_item_content_2 = replaceAll("%%replies%%", "", report_item_content_2);
        report_item_content_2 = replaceAll("%%noreply%%", "hide", report_item_content_2);
      }

      if(!window.reports[i].verified){
        report_item_content_2 = replaceAll("%%verifier_text%%", "", report_item_content_2);
      }
      else {
        report_item_content_2 = replaceAll("%%verifier_text%%", "Verified by " + window.reports[i].verifier, report_item_content_2);
      }

      report_item_content_2 = replaceAll("%%upvote_count%%", window.reports[i].vote_ups, report_item_content_2);

      report_item_content_2 = replaceAll("%%type%%", window.reports[i].type.toLowerCase(), report_item_content_2);

      if(!window.reports[i].verified){
        report_item_content_2 = replaceAll("%%not_verified%%", "hide", report_item_content_2);
      }

      if(window.reports[i].photos.length){
        report_item_content_2 = replaceAll("%%photo%%", '<img src="' + window.reports[i].photos[0] + '" />', report_item_content_2);
        report_item_content_2 = replaceAll("%%photo_url%%", window.reports[i].photos[0], report_item_content_2);
      }
      else {
        report_item_content_2 = replaceAll("%%photo%%", '', report_item_content_2);
        report_item_content_2 = replaceAll("%%photo_url%%", window.reports[i].photos[0], report_item_content_2);
      }

      report_item_content_2 = replaceAll("%%index%%", i, report_item_content_2);

      report_item_content_2 = replaceAll("%%content_share%%", encodeURIComponent(truncateString(window.reports[i].content, 110, ' ', '...')), report_item_content_2);

      report_item_content_2 = replaceAll("%%id%%", window.reports[i].id, report_item_content_2);

      if(window.reports[i].closed){
        report_item_content_2 = replaceAll("%%gray%%", 'make-gray', report_item_content_2);
        report_item_content_2 = replaceAll("%%close_text%%", 'Closed', report_item_content_2);
      }
      else {
        report_item_content_2 = replaceAll("%%gray%%", '', report_item_content_2);
        report_item_content_2 = replaceAll("%%close_text%%", 'Close', report_item_content_2);
      }

      $("#report-list-2").append(report_item_content_2);
    }

    function render_reports_list() {
      clear_sidebar();

      window.current_report_length = 0;
      for(i=0; i<window.reports.length; i++){
        // if (window.bound_box_report_lists.indexOf(parseInt(window.reports[i].id)) > -1) {
          render_reports_template1(i);
          render_reports_template2(i);
          window.current_report_length++;
        // }
      }
      reports_count();

      if ($(".gm-style-iw").length) {
        highlight_report_item(Object.keys(window.report_lists).indexOf($("#comment_form_report_id").val()));
      }
    }

    function append_to_reports_list(start_index){
      // reports_count();

      for(i=start_index; i<window.reports.length; i++){
        // if (window.bound_box_report_lists.indexOf(window.reports[i].id) > -1) {
          var report_item_content = $("#report-item-template").html();
          report_item_content = replaceAll("%%content%%", window.reports[i].content, report_item_content);

          if(window.reports[i].source){
            report_item_content = replaceAll("%%source%%", window.reports[i].source.toLowerCase(), report_item_content);
          }
          else {
            report_item_content = replaceAll("%%source%%", "none", report_item_content);
          }

          report_item_content = replaceAll("%%timestamp%%", moment.unix(window.reports[i].created).fromNow(), report_item_content);

          report_item_content = replaceAll("%%icon%%", window.reports[i].icon, report_item_content);

          marker_image = '<img src="/img/marker-%%type%%.png" alt="">'

          if(window.reports[i].type == ""){
            window.reports[i].type = "INFO";
          }

          marker_image = replaceAll("%%type%%", window.reports[i].type.toLowerCase(), marker_image);

          if(window.reports[i].lat){
            if(window.reports[i].lat != "None"){
              report_item_content = replaceAll("%%marker_image%%", marker_image, report_item_content);
            }
            else {
              report_item_content = replaceAll("%%marker_image%%", "", report_item_content);
            }
          }
          else {
            report_item_content = replaceAll("%%marker_image%%", "", report_item_content);
          }

          if(window.reports[i].replies == 1){
            report_item_content = replaceAll("%%replies%%", window.reports[i].replies + " reply ", report_item_content);
            report_item_content = replaceAll("%%noreply%%", "", report_item_content);
          }
          else if(window.reports[i].replies > 1) {
            report_item_content = replaceAll("%%replies%%", window.reports[i].replies + " replies ", report_item_content);
            report_item_content = replaceAll("%%noreply%%", "", report_item_content);
          }
          else {
            report_item_content = replaceAll("%%replies%%", "", report_item_content);
            report_item_content = replaceAll("%%noreply%%", "hide", report_item_content);
          }

          if(!window.reports[i].verified){
            report_item_content = replaceAll("%%verifier_text%%", "", report_item_content);
          }
          else {
            report_item_content = replaceAll("%%verifier_text%%", "Verified by " + window.reports[i].verifier, report_item_content);
          }

          report_item_content = replaceAll("%%upvote_count%%", window.reports[i].vote_ups, report_item_content);

          report_item_content = replaceAll("%%type%%", window.reports[i].type.toLowerCase(), report_item_content);

          if(!window.reports[i].verified){
            report_item_content = replaceAll("%%not_verified%%", "hide", report_item_content);
          }

          if(window.reports[i].photos.length){
            report_item_content = replaceAll("%%photo%%", '<img src="' + window.reports[i].photos[0] + '" />', report_item_content);
            report_item_content = replaceAll("%%photo_url%%", window.reports[i].photos[0], report_item_content);
          }
          else {
            report_item_content = replaceAll("%%photo%%", '', report_item_content);
            report_item_content = replaceAll("%%photo_url%%", window.reports[i].photos[0], report_item_content);
          }

          report_item_content = replaceAll("%%index%%", i, report_item_content);
          report_item_content = replaceAll("%%content_share%%", encodeURIComponent(truncateString(window.reports[i].content, 110, ' ', '...')), report_item_content);
          report_item_content = replaceAll("%%id%%", window.reports[i].id, report_item_content);

          if(window.reports[i].closed){
            report_item_content = replaceAll("%%gray%%", 'make-gray', report_item_content);
            report_item_content = replaceAll("%%close_text%%", 'Closed', report_item_content);
          }
          else {
            report_item_content = replaceAll("%%gray%%", '', report_item_content);
            report_item_content = replaceAll("%%close_text%%", 'Close', report_item_content);
          }

          $("#report-list").append(report_item_content);
        // }
      }
    }


    function clear_map(){
      remove_markers();
      window.reports = [];
    }


    function clear_sidebar(){
      $("#report-list").empty();
      $("#report-list-2").empty();
    }


    function clear_all(){
      close_all_info_windows();
      clear_sidebar();
      clear_map();
      clear_all_selected_variables();
    }


    function clear_all_selected_variables(){
      window.selected_sidebar = null;
      window.selected_report = null;
      window.current_marker = null;
    }


    function fetch_reports(){
      report_type = window.current_report_type;
      sort = window.current_report_sort;
      verified = window.current_report_verified;

      var url = "/api/v1/reports?expand=owner,edited_by,closed_by";

      

      if (report_type != "ALL") {
        url += "&filter_info_type=" + report_type;
      }

      if(sort == 'HOT_DOWN'){
        url += "&sort_vote_ups=desc";
      }
      if(sort == 'HOT_UP'){
        url += "&sort_vote_ups=asc";
      }
      if(sort == 'DATE_DOWN'){
        url += "&sort_created=desc";
      }
      if(sort == 'DATE_UP'){
        url += "&sort_created=asc";
      }

      if(verified == 'VERIFIED'){
        url += "&filter_verified=true";
      }
      if(verified == 'UNVERIFIED'){
        url += "&filter_verified=false";
      }

      if(window.current_tags_string){
        url += "&tags=" + window.current_tags_string;
      }

      var check = false;

      $.getJSON( url, function(data) {
        console.log(data);
        if(window.initial){
          window.initial = false;
          check = true;
        }
        else {
          clear_all();
        }

        var twitter = ["tweet","twitter"];
        var sms = ["sms","text","mobile","phone","chikka"];
        var computer = ["web","computer", "laptop"];
        var icon = "laptop";

        for(i=0; i<data.contents.length; i++){
          if(data.contents[i].source){
            if(twitter.indexOf(data.contents[i].source.toLowerCase()) > -1){
              icon = "twitter";
            }
            else if(sms.indexOf(data.contents[i].source.toLowerCase()) > -1){
              icon = "phone";
            }
          }
          if(check){
            if(window.reports.length){
              if(window.reports[0].id == data.contents[i].id){
                continue;
              }
            }
          }
          var temp = {
            "id": data.contents[i].id,
            "content": data.contents[i].content,
            "created": data.contents[i].created,
            "current_user_vote": data.contents[i].current_user_vote,
            "key": data.contents[i].key,
            "lat": data.contents[i].lat,
            "lng": data.contents[i].lng,
            "location": data.contents[i].location,
            "owner": data.contents[i].owner,
            "edited_by": data.contents[i].edited_by,
            "closed_by": data.contents[i].closed_by,
            "name": data.contents[i].name,
            "photos": data.contents[i].photos,
            "responded": data.contents[i].responded,
            "responder": data.contents[i].responder,
            "source": data.contents[i].source,
            "special_report": data.contents[i].special_report,
            "type": data.contents[i].type,
            "verified": data.contents[i].verified,
            "verifier": data.contents[i].verifier,
            "vote_ups": data.contents[i].vote_ups,
            "replies": data.contents[i].replies,
            "voted": data.contents[i].current_user_vote,
            "icon": icon,
            "closed": data.contents[i].closed
          };
          window.reports.push(temp);
          window.report_lists[data.contents[i].id] = temp;
        }


        if(data.next_page){
          fetch_next_reports(data.next_page);
        }
        else {
          MapSwitcher();
        }
      });
    }

    function fetch_next_reports(next_page){
      var url = next_page;
      var last_index = window.reports.length;
        console.log(last_index);
      if(last_index >= 500) {
          MapSwitcher();
          fetch_with_location_reports();
      }
      else {
          $.getJSON(url, function (data) {
              console.log(data);

              var twitter = ["tweet", "twitter"];
              var sms = ["sms", "text", "mobile", "phone", "chikka"];
              var computer = ["web", "computer", "laptop"];
              var icon = "laptop";
              var temp;

              for (i = 0; i < data.contents.length; i++) {
                  if (data.contents[i].source) {
                      if (twitter.indexOf(data.contents[i].source.toLowerCase()) > -1) {
                          icon = "twitter";
                      }
                      else if (sms.indexOf(data.contents[i].source.toLowerCase()) > -1) {
                          icon = "phone";
                      }
                  }

                  temp = {
                      "id": data.contents[i].id,
                      "content": data.contents[i].content,
                      "created": data.contents[i].created,
                      "current_user_vote": data.contents[i].current_user_vote,
                      "key": data.contents[i].key,
                      "lat": data.contents[i].lat,
                      "lng": data.contents[i].lng,
                      "location": data.contents[i].location,
                      "owner": data.contents[i].owner,
                      "edited_by": data.contents[i].edited_by,
                      "closed_by": data.contents[i].closed_by,
                      "name": data.contents[i].name,
                      "photos": data.contents[i].photos,
                      "responded": data.contents[i].responded,
                      "responder": data.contents[i].responder,
                      "source": data.contents[i].source,
                      "special_report": data.contents[i].special_report,
                      "type": data.contents[i].type,
                      "verified": data.contents[i].verified,
                      "verifier": data.contents[i].verifier,
                      "vote_ups": data.contents[i].vote_ups,
                      "replies": data.contents[i].replies,
                      "voted": data.contents[i].current_user_vote,
                      "icon": icon,
                      "closed": data.contents[i].closed
                  };
                  window.reports.push(temp);
                  window.report_lists[data.contents[i].id] = temp;
              }

              append_reports(last_index);
              if (data.next_page) {
                  // check if sort is by time desc and if the reports are older than 12 hours. if older than 12, don't show.

                  if (window.current_report_sort == 'DATE_DOWN') {
                      var oldest_date = moment.unix(data.contents[data.contents.length - 1].created).toDate();
                      var now = new Date();
                      var hours = Math.abs(now - oldest_date) / 36e5;
                      var limit = 12;

                      console.log("HOURS", hours);
                      // 744 = 31 days
                      if(window.current_tags_string){
                          limit = 744;
                      }

                      if (hours > limit) {
                          MapSwitcher();
                          fetch_with_location_reports();
                      }
                      else {
                          fetch_next_reports(data.next_page);
                      }
                  }
                  else {
                      fetch_next_reports(data.next_page);
                  }
              }
              else {
                  MapSwitcher();
                  fetch_with_location_reports();
                  /*fetch_all_comments();*/
              }
          });
      }
    }

    function fetch_with_location_reports(){
      report_type = window.current_report_type;
      sort = window.current_report_sort;
      verified = window.current_report_verified;

      var url = "/api/v1/reports?expand=owner,edited_by,closed_by";

      

      if (report_type != "ALL") {
        url += "&filter_info_type=" + report_type;
      }

      if(sort == 'HOT_DOWN'){
        url += "&sort_vote_ups=desc";
      }
      if(sort == 'HOT_UP'){
        url += "&sort_vote_ups=asc";
      }
      if(sort == 'DATE_DOWN'){
        url += "&sort_created=desc";
      }
      if(sort == 'DATE_UP'){
        url += "&sort_created=asc";
      }

      if(verified == 'VERIFIED'){
        url += "&filter_verified=true";
      }
      if(verified == 'UNVERIFIED'){
        url += "&filter_verified=false";
      }

      url += "&filter_filter_tags=HAS_LATLNG->TRUE";


      if(window.current_tags_string){
        url += "&tags=" + window.current_tags_string;
      }

      $.getJSON( url, function(data) {
        console.log(data);

        var twitter = ["tweet","twitter"];
        var sms = ["sms","text","mobile","phone","chikka"];
        var computer = ["web","computer", "laptop"];
        var icon = "laptop";

        for(i=0; i<data.contents.length; i++){
          if(data.contents[i].source){
            if(twitter.indexOf(data.contents[i].source.toLowerCase()) > -1){
              icon = "twitter";
            }
            else if(sms.indexOf(data.contents[i].source.toLowerCase()) > -1){
              icon = "phone";
            }
          }

          var temp = {
            "id": data.contents[i].id,
            "content": data.contents[i].content,
            "created": data.contents[i].created,
            "current_user_vote": data.contents[i].current_user_vote,
            "key": data.contents[i].key,
            "lat": data.contents[i].lat,
            "lng": data.contents[i].lng,
            "location": data.contents[i].location,
            "owner": data.contents[i].owner,
            "edited_by": data.contents[i].edited_by,
            "closed_by": data.contents[i].closed_by,
            "name": data.contents[i].name,
            "photos": data.contents[i].photos,
            "responded": data.contents[i].responded,
            "responder": data.contents[i].responder,
            "source": data.contents[i].source,
            "special_report": data.contents[i].special_report,
            "type": data.contents[i].type,
            "verified": data.contents[i].verified,
            "verifier": data.contents[i].verifier,
            "vote_ups": data.contents[i].vote_ups,
            "replies": data.contents[i].replies,
            "voted": data.contents[i].current_user_vote,
            "icon": icon,
            "closed": data.contents[i].closed
          };
          window.reports.push(temp);
          window.report_lists[data.contents[i].id] = temp;
        }
        render_markers();

      });

    }

    function render_reports(first){
      
      render_reports_list();
      render_markers();

      if(first){
        specific_report(0);
      }
    }

    function append_reports(start_index){
      
      append_to_reports_list(start_index);
      append_new_markers(start_index);
    }


    function add_report(report){
      if(window.reports && window.reports.length){
      }
      else {
        window.reports = [];
      }
      var twitter = ["tweet","twitter"];
      var sms = ["sms","text","mobile","phone","chikka"];
      var computer = ["web","computer", "laptop"];
      var icon = "laptop";

      if(report.source){
        if(twitter.indexOf(report.source.toLowerCase()) > -1){
          icon = "twitter";
        }
        else if(sms.indexOf(report.source.toLowerCase()) > -1){
          icon = "phone";
        }
      }

      window.reports.unshift({
        "id": report.id,
        "content": report.content,
        "created": report.created,
        "current_user_vote": report.current_user_vote,
        "key": report.key,
        "lat": report.lat,
        "lng": report.lng,
        "location": report.location,
        "owner": report.owner,
        "name": report.name,
        "photos": report.photos,
        "responded": report.responded,
        "responder": report.responder,
        "source": report.source,
        "special_report": report.special_report,
        "type": report.type,
        "verified": report.verified,
        "verifier": report.verifier,
        "vote_ups": report.vote_ups,
        "replies": report.replies,
        "voted": report.current_user_vote,
        "icon": icon,
        "closed": false
      });

      window.report_lists[report.id] = window.reports[0];

      window.selected_report = 0;
      first = true;
      MapSwitcher();
    }

    window.bound_box_dataset_lists = [];
    window.opened_datasets = [];
    window.datasets = new Object();
    

    

    function fetch_data(){
      

      $.getJSON( "/api/v1/data" + (window.current_tags_string ? "?tags=" + window.current_tags_string:""), function(data) {
        console.log(data);
        for(i=0; i<data.contents.length; i++){
          window.datasets[data.contents[i].id] = {
            "id": data.contents[i].id,
            "created": data.contents[i].created,
            "key": data.contents[i].key,
            "owner": data.contents[i].owner,
            "source": data.contents[i].source,
            "title": data.contents[i].title,
            "icon": data.contents[i].file_icon_full,
            "file_source_full": data.contents[i].file_source_full,
            "lat": data.contents[i].lat,
            "lng": data.contents[i].lng,
            "localize_option": data.contents[i].localize_option
          };
        }

        render_data_options();
        DatasetsMapSwitcher();
      });

      
    }



    function get_datasets_in_square(sw, ne, zoom) {
      try {
        _data = {"sw_lat": sw.lat(), "sw_lng": sw.lng(), "ne_lat": ne.lat(), "ne_lng": ne.lng(), "zoom": zoom};
        if (window.current_tags_string) {
          _data["tags"] = window.current_tags_string;
        }
        $.ajax({
          type: "POST",
          contentType: "application/json",
          dataType: 'json',
          url: "/api/v3/geo_dataset_server",
          data: _data,
          success: function(response) {
            var added_dataset_id = [];
            for (dataset in response.datasets) {
              if (window.bound_box_dataset_lists.indexOf(response.datasets[dataset]) < 0) {
                  added_dataset_id.push(response.datasets[dataset]);
              }
            }

            window.bound_box_dataset_lists = response.datasets;

            // remove ids not in datasets
            var new_datasets = []
            for (index in added_dataset_id) {
              console.log(index);
              if (window.datasets[added_dataset_id[index]] != undefined) {
                  new_datasets.push(added_dataset_id[index]);
              }
            }

            added_dataset_id = new_datasets;

            render_data_options();

            if (added_dataset_id.length > 0) {
              datasets_notification(added_dataset_id);
            }
          },
          error: function(err) {
            console.log(err);
          }
        });
      } catch(e) {
        console.log(e);
        render_data_options();
      }
    }

    function datasets_notification(ids) {
      var noti_html = null;
      if (ids.length > 1) {
        noti_html = $("<div>", {'class': 'notify-dataset' , 'data-id': ids}).append("Multiple datasets added.");
      } else {
        noti_html = $("<div>", {'class': 'notify-dataset', 'data-id': ids}).append("New datasets added. <br />" + window.datasets[ids[0]].title);
      }

      $.notify({
          datasetContainer: noti_html,
        },
        {
          position:"bottom left",
          style: 'bootstrap',
          className: '',
          autoHide: true
        }
      );
    }

    $(document).on("click", ".notify-dataset", function() {
      ids = $(this).attr("data-id").split(",");
      for (id in ids) {
        $(".dynamic-switch-" + ids[id]).switchButton({ checked: true });
      }
    });

    function fetch_all_comments(){
      for(i=0; i<window.reports.length; i++){
        fetch_comments(i);
      }
    }


    function fetch_comments(report_index){
      try {
        var new_report_index = report_index;
        $.getJSON( "/api/v1/comments?sort_created=up&expand=owner&filter_parent=" + window.reports[new_report_index].key, function(data) {
          console.log(data);
          window.reports[new_report_index].comments = [];
          for(i=0; i<data.contents.length; i++){
            comments = data.contents;
            comment = comments[i];
            window.reports[new_report_index].comments.push(comment);
          }
        });
      } catch(ex) {
        console.log(ex);
      }
    }


    function upvote(report_index){
      if(window.reports[report_index].voted == 1){
        console.log("Voted already");
        return;
      }
      window.reports[report_index].voted = 1;

      var id = window.reports[report_index].id;
      var new_report_index = report_index;

      $.ajax({
        url: '/api/v1/reports/' + id + '/vote/up',
        type: 'PUT',
        success: function(data) {

          counter = $('#up-count2-' + new_report_index).text();

          console.log(counter);
          var total = parseInt(counter) + 1;
          $('#up-count-' + new_report_index).html(total);
          $('#up-count2-' + new_report_index).html(total);
          window.reports[new_report_index].vote_ups = total;
        },
        error: function(request, status, error) {
          console.log(request.responseText);
          window.reports[report_index].voted = 0;
        }
      });
    }

    function flag_report(report_index){
      if(window.reports[report_index].flagged == 1){
        console.log("Flagged already");
        return;
      }
      window.reports[report_index].flagged = 1;

      var id = window.reports[report_index].id;
      var new_report_index = report_index;

      $.ajax({
        url: '/api/v1/reports/' + id + '/vote/down',
        type: 'PUT',
        success: function(data) {
            console.log('success in flagging');
            window.reports.splice(report_index, 1);
            render_reports();
        },
        error: function(request, status, error) {
          console.log(request.responseText);
          window.reports[report_index].flagged = 0;
        }
      });
    }


    function close_report(report_index){
      if(window.reports[report_index].closed == true){
        console.log("closed already");
        return;
      }
      window.reports[report_index].closed = true;

      var id = window.reports[report_index].id;
      var new_report_index = report_index;

      $.ajax({
        url: '/api/v1/reports/' + id + '/close',
        type: 'PUT',
        success: function(data) {
            console.log('success in closing');
            window.reports[report_index].closed = true;
            render_reports();
        },
        error: function(request, status, error) {
          console.log(request.responseText);
          window.reports[report_index].closed = false;
        }
      });
    }


    function toggle_verify_report(verified, verifier, report_index){
      window.reports[report_index].verified = verified;
      window.reports[report_index].verifier = verifier;
      if(verified){
        $("#specific_report_item_" + report_index + " .verified").removeClass("hide");
        $("#specific_report_item_" + report_index + " .verified img").attr("title", "Verified by " + verifier);

        
        $("#verify_info_window").removeClass("hide");
        $("#verify_info_window img").attr("title", "Verified by " + verifier);
        
      }
      else {
        $("#specific_report_item_" + report_index + " .verified").addClass("hide");
        $("#specific_report_item_" + report_index + " .verified img").attr("title", "Not Verified");

        
        $("#verify_info_window").addClass("hide");
        $("#verify_info_window img").attr("title", "");
        
      }
    }


    window.verifying = false;

    function toggle_verify(report_index){
      if(window.verifying){
        return
      }
      window.verifying = true;

      var id = window.reports[report_index].id;
      var new_report_index = report_index;

      $.ajax({
        url: '/api/v1/reports/' + id + '/verify',
        type: 'PUT',
        success: function(data) {
          console.log(data);
          data = $.parseJSON(data);
          toggle_verify_report(data.content.verified, data.content.verifier, new_report_index);
          window.verifying = false;
        },
        error: function(request, status, error) {
          console.log(request.responseText);
          window.verifying = false;
        }
      });
    }


    function get_address_from_lat_lng(lat, lng) {
        var lat = parseFloat(lat);
        var lng = parseFloat(lng);
        var latlng = new google.maps.LatLng(lat, lng);
        geocoder = new google.maps.Geocoder();
        geocoder.geocode({'latLng': latlng}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                console.log(results);
                console.log(results[0].formatted_address);
                if (results[0]) {
                    $("#current_geocoded_location").html(results[0].formatted_address);
                    $("#current_geocoded_location_input").val(results[0].formatted_address);
                }
                if(results.length > 1) {
                  if(results[1]){
                    $("#current_geocoded_location2_input").val(results[1].formatted_address);
                  }
                }
            } else {
                console.log("Geocoder failed due to: " + status);
            }
        });
    }


    function render_comments(report_index){
      var comments = window.reports[report_index].comments;
      if(!comments){
        return "";
      }

      var comment_string = "";

      for(i=0; i<comments.length; i++){
        var comment_item = $("#single-comment-template").html();
        comment_item = replaceAll("%%owner%%", comments[i].owner.name, comment_item);
        comment_item = replaceAll("%%timestamp%%", moment.unix(comments[i].created).fromNow(), comment_item);
        comment_item = replaceAll("%%content%%", comments[i].content, comment_item);

        if(comments[i].owner.official){
          comment_item = replaceAll("%%official%%", "text-primary", comment_item);
          comment_item = replaceAll("%%official-verified%%", '<img src="/img/ico-official.svg" class="official-user" title="Verified" alt="Verified">', comment_item);
        }
        else {
          comment_item = replaceAll("%%official%%", "", comment_item);
          comment_item = replaceAll("%%official-verified%%", '', comment_item);
        }

        comment_string += comment_item;
      }

      return comment_string;
    }


    function render_data_options2(){
      // var switcher3 = 0;
      var switcher_list = {};
      $(".cb-container-t").remove();

      for (index in window.datasets) {
        var dataset_item = $("#dataset-menu-template").html();
        dataset_item = replaceAll("%%id%%", window.datasets[index].id, dataset_item);
        dataset_item = replaceAll("%%title%%", window.datasets[index].title, dataset_item);

        $("#datasets-list").append(dataset_item);
        $("#datasets-list-2").append(dataset_item);
      }

      $(".cb-container input.normal").unbind('change');

      $('.cb-container input.normal').switchButton({
          checked: false,
          show_labels: false
      }).change(function(){
        if(switcher_list["dynamic-switch-" + $(this).attr("id")] == 0 || switcher_list["dynamic-switch-" + $(this).attr("id")] == undefined) {
          cb = $(this).prop("checked");
          parent_li = $(this).parent(".flip-switch");
          content = parent_li.next("span").text();

          if(cb){
            render_kml($(this).val());
          }
          else {
            unrender_kml($(this).val());
          }

          switcher_list["dynamic-switch-" + $(this).attr("id")] = $(".cb-container input.dynamic-switch-" + $(this).attr("id")).length - 1;
          // switcher3 = $(".cb-container input.dynamic-switch-" + $(this).attr("id")).length - 1;

          $(".cb-container input.dynamic-switch-" + $(this).attr("id")).switchButton({ checked: cb });
        } else {
          switcher_list["dynamic-switch-" + $(this).attr("id")]--;
          // switcher3++;
        }
      });
    }

    var switcher_list = {};
    function switchButton(id) {
      $("."+ id +" input.normal").unbind('change');

      $('.'+ id +' input.normal').switchButton({
          checked: window.opened_datasets.indexOf(parseInt(id)) > -1,
          show_labels: false
      }).change(function(){
        if(switcher_list["dynamic-switch-" + $(this).attr("id")] == 0 || switcher_list["dynamic-switch-" + $(this).attr("id")] == undefined) {
          cb = $(this).prop("checked");
          parent_li = $(this).parent(".flip-switch");
          content = parent_li.next("span").text();

          if(cb){
            render_kml($(this).val());
          }
          else {
            unrender_kml($(this).val());
          }

          switcher_list["dynamic-switch-" + $(this).attr("id")] = $(".cb-container input.dynamic-switch-" + $(this).attr("id")).length - 1;
          // switcher3 = $(".cb-container input.dynamic-switch-" + $(this).attr("id")).length - 1;

          $(".cb-container input.dynamic-switch-" + $(this).attr("id")).switchButton({ checked: cb });
        } else {
          switcher_list["dynamic-switch-" + $(this).attr("id")]--;
          // switcher3++;
        }
      });
    }

    function render_data_options(){
      $(".cb-container-t").hide();

      for (dataset_id in window.datasets) {
        dataset_id = parseInt(dataset_id);
        // if(window.bound_box_dataset_lists.indexOf(dataset_id) > -1 || ((window.datasets[dataset_id].localize_option == "Global") || !window.datasets[dataset_id].lat && !window.datasets[dataset_id].lng)) {
          var dataset_item = $("#dataset-menu-template").html();
          dataset_item = replaceAll("%%id%%", window.datasets[dataset_id].id, dataset_item);
          dataset_item = replaceAll("%%title%%", window.datasets[dataset_id].title, dataset_item);
          if ($("." + window.datasets[dataset_id].id).length == 0) {
            $("#datasets-list").append(dataset_item);
            $("#datasets-list-2").append(dataset_item);
            switchButton(window.datasets[dataset_id].id);
          }
          $("." + window.datasets[dataset_id].id).attr("class", "cb-container "+ window.datasets[dataset_id].id +" cb-container-u");
        // }
      }

      $(".cb-container-u").show();
      $(".cb-container-t").remove();
      $(".cb-container-u").addClass("cb-container-t");
      $(".cb-container-u").removeClass("cb-container-u");
    }


    function render_kml(dataset_id){
      if(window.opened_datasets.indexOf(parseInt(dataset_id)) < 0) {
        window.opened_datasets.push(parseInt(dataset_id));
      }

      console.log(dataset_id);
      try {
        window.datasets[dataset_id].layer.setMap(null);
        window.datasets[dataset_id].layer2.setMap(null);
      } catch(e) {
        console.log(e);
      }
      window.datasets[dataset_id].layer = new google.maps.KmlLayer({
        url: window.datasets[dataset_id].file_source_full
      });

      window.datasets[dataset_id].layer2 = new google.maps.KmlLayer({
        url: window.datasets[dataset_id].file_source_full
      });

      window.datasets[dataset_id].layer.setMap(window.this_map);
      window.datasets[dataset_id].layer2.setMap(window.this_map2);
    }


    function unrender_kml(dataset_id){
      try {
        window.opened_datasets.splice(window.opened_datasets.indexOf(parseInt(dataset_id)), 1);
      } catch(ex) {
        console.log(ex);
      }
      console.log(dataset_id);
      window.datasets[dataset_id].layer.setMap(null);
      window.datasets[dataset_id].layer2.setMap(null);
    }

    function render_fusion(){
      console.log('render fusion...');
      window.fusion_map_layer = new google.maps.FusionTablesLayer({
        map: window.this_map,
        heatmap: { enabled: false },
        query: {
          select: "col0",
          from: "12zGjdyvDfWas_fpUnkW6oo-bj1shx9u3faqKrszd",
          where: "col4 in (\x27High\x27, \x27Low to Moderate\x27)"
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
      window.fusion2_map_layer = new google.maps.FusionTablesLayer({
        map: window.this_map2,
        heatmap: { enabled: false },
        query: {
          select: "col0",
          from: "12zGjdyvDfWas_fpUnkW6oo-bj1shx9u3faqKrszd",
          where: "col4 in (\x27High\x27, \x27Low to Moderate\x27)"
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
    }

    function unrender_fusion(){
      window.fusion_map_layer.setMap(null);
      window.fusion2_map_layer.setMap(null);
    }


    function render_fusion2(){
      console.log('render fusion2...');
      window.fusion_map_layer2 = new google.maps.FusionTablesLayer({
        map: window.this_map,
        heatmap: { enabled: false },
        query: {
          select: "col4",
          from: "1lW5bYab8xaifuXIbHlHTINgtQinNotF-naksjfb0",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });

      window.fusion2_map_layer2 = new google.maps.FusionTablesLayer({
        map: window.this_map2,
        heatmap: { enabled: false },
        query: {
          select: "col4",
          from: "1lW5bYab8xaifuXIbHlHTINgtQinNotF-naksjfb0",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
    }

    function unrender_fusion2(){
      window.fusion_map_layer2.setMap(null);
      window.fusion2_map_layer2.setMap(null);
    }


    function render_fusion3(){
      console.log('render fusion3...');
      window.fusion_map_layer3 = new google.maps.FusionTablesLayer({
        map: window.this_map,
        heatmap: { enabled: false },
        query: {
          select: "col6",
          from: "1XrYx_RdAkXuaf1-3DAwb0ydtAppfwDkOqKaBmcMz",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });

      window.fusion2_map_layer3 = new google.maps.FusionTablesLayer({
        map: window.this_map2,
        heatmap: { enabled: false },
        query: {
          select: "col6",
          from: "1XrYx_RdAkXuaf1-3DAwb0ydtAppfwDkOqKaBmcMz",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
    }

    function unrender_fusion3(){
      window.fusion_map_layer3.setMap(null);
      window.fusion2_map_layer3.setMap(null);
    }

    function render_fusion4(){
      console.log('render fusion4...');
      window.fusion_map_layer4 = new google.maps.FusionTablesLayer({
        map: window.this_map,
        heatmap: { enabled: false },
        query: {
          select: "col4",
          from: "1lW5bYab8xaifuXIbHlHTINgtQinNotF-naksjfb0",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });

      window.fusion2_map_layer4 = new google.maps.FusionTablesLayer({
        map: window.this_map2,
        heatmap: { enabled: false },
        query: {
          select: "col4",
          from: "1lW5bYab8xaifuXIbHlHTINgtQinNotF-naksjfb0",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
    }

    function unrender_fusion4(){
      window.fusion_map_layer4.setMap(null);
      window.fusion2_map_layer4.setMap(null);
    }

    function render_fusion5(){
      console.log('render fusion5...');
      window.fusion_map_layer5 = new google.maps.FusionTablesLayer({
        map: window.this_map,
        heatmap: { enabled: false },
        query: {
          select: "col7",
          from: "1j-qmdlwkiIXlPljxdolTu5BurEo4adHnf6CHAsU2",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });

      window.fusion2_map_layer5 = new google.maps.FusionTablesLayer({
        map: window.this_map2,
        heatmap: { enabled: false },
        query: {
          select: "col7",
          from: "1j-qmdlwkiIXlPljxdolTu5BurEo4adHnf6CHAsU2",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
    }

    function unrender_fusion5(){
      window.fusion_map_layer5.setMap(null);
      window.fusion2_map_layer5.setMap(null);
    }

    function render_fusion6(){
      console.log('render fusion6...');
      window.fusion_map_layer6 = new google.maps.FusionTablesLayer({
        map: window.this_map,
        heatmap: { enabled: false },
        query: {
          select: "col6",
          from: "1yYyjQHv1FZV-xxzVYFaTdfCGu2eqvbbUmfRLFzbt",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });

      window.fusion2_map_layer6 = new google.maps.FusionTablesLayer({
        map: window.this_map2,
        heatmap: { enabled: false },
        query: {
          select: "col6",
          from: "1yYyjQHv1FZV-xxzVYFaTdfCGu2eqvbbUmfRLFzbt",
          where: ""
        },
        options: {
          styleId: 2,
          templateId: 2
        }
      });
    }

    function unrender_fusion6(){
      window.fusion_map_layer6.setMap(null);
      window.fusion2_map_layer6.setMap(null);
    }
    </script>

    <script type="text/javascript">
      $(document).ready(function(){
        var switcher1 = 0;
        var switcher2 = 0;
        var switcher3 = 0;
        var switcher4 = 0;
        var switcher5 = 0;
        var switcher6 = 0;

        $('.data-fusion').switchButton({
            checked: false,
            show_labels: false
        }).change(function(){
          if (switcher1 == 0) {
            cb = $(this).prop("checked");
            parent_li = $(this).parent(".flip-switch");
            content = parent_li.next("span").text();

            if(cb){
              render_fusion();
            }
            else {
              unrender_fusion();
            }

            switcher1 = $(".data-fusion").length - 1;

            $('.data-fusion').switchButton({ checked: cb });
          } else {
            switcher1--;
          }
        });

        $('.data-fusion2').switchButton({
            checked: false,
            show_labels: false
        }).change(function(){
          if (switcher2 == 0) {
            cb = $(this).prop("checked");
            parent_li = $(this).parent(".flip-switch");
            content = parent_li.next("span").text();

            if(cb){
              render_fusion2();
            }
            else {
              unrender_fusion2();
            }

            switcher2 = $(".data-fusion2").length - 1;

            $('.data-fusion2').switchButton({ checked: cb });
          } else {
            switcher2--;
          }
        });

        $('.data-fusion3').switchButton({
            checked: false,
            show_labels: false
        }).change(function(){
          if (switcher3 == 0) {
            cb = $(this).prop("checked");
            parent_li = $(this).parent(".flip-switch");
            content = parent_li.next("span").text();

            if(cb){
              render_fusion3();
            }
            else {
              unrender_fusion3();
            }

            switcher3 = $(".data-fusion3").length - 1;

            $('.data-fusion3').switchButton({ checked: cb });
          } else {
            switcher3--;
          }
        });

        $('.data-fusion4').switchButton({
            checked: false,
            show_labels: false
        }).change(function(){
          if (switcher4 == 0) {
            cb = $(this).prop("checked");
            parent_li = $(this).parent(".flip-switch");
            content = parent_li.next("span").text();

            if(cb){
              render_fusion4();
            }
            else {
              unrender_fusion4();
            }

            switcher4 = $(".data-fusion4").length - 1;

            $('.data-fusion4').switchButton({ checked: cb });
          } else {
            switcher4--;
          }
        });

        $('.data-fusion5').switchButton({
            checked: false,
            show_labels: false
        }).change(function(){
          if (switcher5 == 0) {
            cb = $(this).prop("checked");
            parent_li = $(this).parent(".flip-switch");
            content = parent_li.next("span").text();

            if(cb){
              render_fusion5();
            }
            else {
              unrender_fusion5();
            }

            switcher5 = $(".data-fusion5").length - 1;

            $('.data-fusion5').switchButton({ checked: cb });
          } else {
            switcher5--;
          }
        });

        $('.data-fusion6').switchButton({
            checked: false,
            show_labels: false
        }).change(function(){
          if (switcher6 == 0) {
            cb = $(this).prop("checked");
            parent_li = $(this).parent(".flip-switch");
            content = parent_li.next("span").text();

            if(cb){
              render_fusion6();
            }
            else {
              unrender_fusion6();
            }

            switcher6 = $(".data-fusion6").length - 1;

            $('.data-fusion6').switchButton({ checked: cb });
          } else {
            switcher6--;
          }
        });

        $('#search-location-input').on('focus', function (e) {
          $(this).one('mouseup', function () {
            $(this).select();
            return false;
          }).select();
        });

        $('#search-location-input').on('keyup', function (e) {
          $('#search-location-input-2').val($(this).val());
        });

        $('#search-location-input-2').on('focus', function (e) {
          $(this).one('mouseup', function () {
            $(this).select();
            return false;
          }).select();
        });

        $('#search-location-input-2').on('keyup', function (e) {
          $('#search-location-input').val($(this).val());
        });

        $("#create-a-report").click(function(){
          create_a_report();
        });

        $("body").on("submit", "#form-report", function(e){
          if (e) {
              e.preventDefault();
          }

          $("#submit-form-report").attr("disabled", "disabled");
          $("#submit-form-report").val("Submitting...");

          var formData = new FormData();
          if(window.current_tags_string){
            var target = "/create/report?expand=owner,edited_by,closed_by&tags=" + window.current_tags_string;
          }
          else {
            var target = "/create/report?expand=owner,edited_by,closed_by";
          }

          var idx = $(this).attr("data-index");
          

          _.each($('#form-report').serializeArray(), function(input) {
              formData.append(input.name, input.value);
          });

          var coords = window.current_marker.getPosition();

          var lat = coords.lat();
          var lng = coords.lng();

          formData.append('lat', lat);
          formData.append('lng', lng);

          var files = document.getElementById("img-upload").files[0];
          if (files) {
              formData.append("file", files);
              formData.append("file_type", files['type']);
          } else {
              formData.append("file", "");
          }
          var xhr = new XMLHttpRequest();
          xhr.open("POST", target, true);
          xhr.send(formData);
          xhr.onload = function(response) {
            console.log(response);
            $("#submit-form-report").removeAttr("disabled");
            close_all_info_windows();
            if(xhr.status == 200){
              console.log(xhr.responseText);
              content = $.parseJSON(xhr.responseText);
              if(idx){
                
              } else {
                add_report(content.content);
              }
            }
            else {
              alert("Please log in and try again.");
            }
          }

          xhr.onerror = function(response) {
            console.log(response);
            close_all_info_windows();
            alert("An error occurred. Please try again.");
          }

        });


        $("body").on("submit", "#submit-comment-form", function(e){
          if (e) {
              e.preventDefault();
          }

          $("#comment_form_submit").attr("disabled", "disabled");


          var formData = new FormData();
          var target = "/api/v2/comments";

          formData.append("report", $("#comment_form_report_id").val());

          $(".cls_comment_form_content").each(function() {
            if($(this).val()){
                formData.append("content", $(this).val());
            }
          });

          var xhr = new XMLHttpRequest();
          xhr.open("POST", target, true);
          xhr.send(formData);
          xhr.onload = function(response) {
            console.log("RESPONSE");
            response = $.parseJSON(this.responseText);
            $("#comment_form_submit").removeAttr("disabled");
            $("#comment_form_content").val("");

            var owner = response.content.owner.name ? response.content.owner.name: "";
            var content = response.content.content;

            var comment_item = $("#single-comment-template").html();
            comment_item = replaceAll("%%owner%%", owner, comment_item);
            comment_item = replaceAll("%%timestamp%%", "just now", comment_item);
            comment_item = replaceAll("%%content%%", content, comment_item);
            if(response.content.owner.official){
              comment_item = replaceAll("%%official%%", "text-primary", comment_item);
              comment_item = replaceAll("%%official-verified%%", '<img src="/img/ico-official.svg" class="official-user" title="Verified" alt="Verified">', comment_item);
            }
            else {
              comment_item = replaceAll("%%official-verified%%", '', comment_item);
              comment_item = replaceAll("%%official%%", "", comment_item);
            }

            $(".response-list").append(comment_item);
          };

          xhr.onerror = function(response) {
            console.log(response);
            alert("An error occurred. Please try again.");
            $("#comment_form_submit").removeAttr("disabled");

          };

        });

        $("body").on("submit", "#submit-comment-form-2", function(e){
          if (e) {
              e.preventDefault();
          }

          $("#comment_form_submit_2").attr("disabled", "disabled");


          var formData = new FormData();
          var target = "/api/v2/comments";

          _.each($('#submit-comment-form-2').serializeArray(), function(input) {
              formData.append(input.name, input.value);
          });

          var xhr = new XMLHttpRequest();
          xhr.open("POST", target, true);
          xhr.send(formData);
          xhr.onload = function(response) {
            console.log("RESPONSE");
            console.log(this.responseText);
            response = $.parseJSON(this.responseText);
            console.log(response);
            $("#comment_form_submit_2").removeAttr("disabled");
            $("#comment_form_content_2").val("");

            var owner = response.content.owner.name;
            var content = response.content.content;

            var comment_item = $("#single-comment-template").html();
            comment_item = replaceAll("%%owner%%", owner, comment_item);
            comment_item = replaceAll("%%timestamp%%", "just now", comment_item);
            comment_item = replaceAll("%%content%%", content, comment_item);
            if(response.content.owner.official){
              comment_item = replaceAll("%%official%%", "text-primary", comment_item);
              comment_item = replaceAll("%%official-verified%%", '<img src="/img/ico-official.svg" class="official-user" title="Verified" alt="Verified">', comment_item);
            }
            else {
              comment_item = replaceAll("%%official%%", "", comment_item);
              comment_item = replaceAll("%%official-verified%%", '', comment_item);
            }

            $(".response-list").append(comment_item);
          }

          xhr.onerror = function(response) {
            console.log(response);
            alert("An error occurred. Please try again.");
            $("#comment_form_submit").removeAttr("disabled");

          }

        });

        $(".report-list-options").on('change', function (e) {
            var optionSelected = $("option:selected", this);
            var valueSelected = this.value;
            window.current_report_type = this.value;
            fetch_reports();
            $(".report-list-options").val(this.value);
        });

        $(".report-list-sort-options").on('change', function (e) {
            var optionSelected = $("option:selected", this);
            var valueSelected = this.value;
            window.current_report_sort = this.value;
            fetch_reports();
            $(".report-list-sort-options").val(this.value);
        });

        $(".report-list-verified-options").on('change', function (e) {
            var optionSelected = $("option:selected", this);
            var valueSelected = this.value;
            window.current_report_verified = this.value;
            fetch_reports();
            $(".report-list-verified-options").val(this.value);
        });

        $("body").on("click", ".report-options input[name='info_type']", function(e) {
          console.log($(this).val());
          if ($(this).val() == "") {
            $(".others-item").removeClass("hide");
          } else {
            $(".others-item").addClass("hide");
          }
        });
      });
    </script>

    <script type="text/x-template" id="create-a-report-form">
      <div>
        <div>
          <div>
            %%top_warning%%
            <div class="modal-body">
              <h2><img src="/img/icon-report-gray.png" alt=""> What’s happening in your area?</h2>
              <form id="form-report" action="/create/report">
                <textarea cols="2" name="content" rows="2" id="write-your-report-here" required="required" placeholder="Write your report here..."></textarea>

                <div class="icons-wrap">
                  <div class="image-upload">
                      <input type="file" id="img-upload">
                  </div>
                </div>

                <div class="report-options">
                  <ul>

                    <li>
                      <img src="/img/marker-info-alert.png" alt="">
                      <p>
                        <label for="info-alert">Info</label>
                        <input type="radio" checked="checked" value="INFO" id="info-alert" name="info_type">
                      </p>
                    </li>

                    <li>
                      <img src="/img/marker-rescue.png" alt="">
                      <p>
                        <label for="rescue-alert">Rescue</label>
                        <input type="radio" value="RESCUE" id="rescue-alert" name="info_type">
                      </p>
                    </li>

                    <li>
                      <img src="/img/marker-flood.png" alt="">
                      <p>
                        <label for="flood-alert">Flood</label>
                        <input type="radio" value="FLOOD" id="flood-alert" name="info_type">
                      </p>
                    </li>

                    <li>
                      <p>
                        <label for="flood-alert">Others</label>
                        <input type="radio" value="" id="others-alert" name="info_type">
                      </p>
                    </li>

                  </ul>
                  <div class="clear-both"></div>
                  <div class="others-item hide">
                    <ul>
                      <li>
                        <img src="/img/bridge.png" alt="">
                        <p>
                          <label for="bridge-alert" class="pl-2">Bridge</label>
                          <input type="radio" value="BRIDGE" id="bridge-alert" checked="checked" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/earthquake.png" alt="">
                        <p>
                          <label for="earthquake-alert" class="pl-2">Earthquake</label>
                          <input type="radio" value="EARTHQUAKE" id="earthquake-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/esite.png" alt="">
                        <p>
                          <label for="earthquake-evacuation-site-alert" class="pl-2">Earthquake Evacuation Site</label>
                          <input type="radio" value="EARTHQUAKE-EVACUATION-SITE" id="earthquake-evacuation-site-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/fire.png" alt="">
                        <p>
                          <label for="fire-alert" class="pl-2">Fire</label>
                          <input type="radio" value="FIRE" id="fire-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/landslide.png" alt="">
                        <p>
                          <label for="landslide-alert" class="pl-2">Landslide</label>
                          <input type="radio" value="LANDSLIDE" id="landslide-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/rain.png" alt="">
                        <p>
                          <label for="rain-alert" class="pl-2">Rain</label>
                          <input type="radio" value="RAIN" id="rain-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/relief.png" alt="">
                        <p>
                          <label for="relief-alert" class="pl-2">Relief</label>
                          <input type="radio" value="RELIEF" id="relief-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/storm-surge.png" alt="">
                        <p>
                          <label for="storm-surge-alert" class="pl-2">Storm Surge</label>
                          <input type="radio" value="STORM-SURGE" id="storm-surge-alert" name="info_type_other">
                        </p>
                      </li>
                      <li>
                        <img src="/img/volcanic-eruption.png" alt="">
                        <p>
                          <label for="volcanic-eruption-alert" class="pl-2">Volcanic Eruption</label>
                          <input type="radio" value="VOLCANIC-ERUPTION" id="volcanic-eruption-alert" name="info_type_other">
                        </p>
                      </li>
                    </ul>
                  </div>
                </div>

                <div class="report-location">
                  <span id="current_geocoded_location"></span>
                  <input type="hidden" name="location" id="current_geocoded_location_input" />
                  <input type="hidden" name="location2" id="current_geocoded_location2_input" />
                </div>

                <div class="clear"></div>
                <em>Drag the pin or retype your location for better accuracy.</em>
                <div class="modal-footer">
                <div class="btn-report" style="margin-top:-15px;"><input id="submit-form-report" type="submit" value="Report"></div>
                <div class="btn-close" data-dismiss="modal" onclick="close_all_info_windows()">Cancel</div>
                </div>
              </form>

            </div>
          </div>
        </div>
      </div>
    </script>

    

    <script type="text/x-template" id="specific-report">
      <div id="modal-report-selected">
        <div>
          <div>
            <div class="modal-header pull-right" style="height:30px;">
              <button onclick="close_all_info_windows()" type="button" class="close"><span aria-hidden="true" style="position: absolute; z-index: 100;">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <span class="report-type"><span class="report-%%icon%%"></span></span>
                <em class="timestamp">%%timestamp%%</em>
                <em class="reply-count"> <sup>.</sup> %%replies%%</em>
              <div class="report-list-top">
                <div class="side">
                  <div class="report-marker">
                    <img src="/img/marker-%%type_lower%%.png" alt="">
                  </div>
                </div>
                <h5 class="report-title">%%type%%</h5>
                <div class="up-vote" onclick="upvote(%%index%%)">
                  <span><b>Prioritize this</b></span>
                  <span><button class="btn-up">&nbsp;</button></span>
                  <span class="up-count" id="up-count-%%index%%">%%vote_ups%%</span>
                </div>
                <ul class="share-buttons">
                  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://agos.rappler.com/reports/%%id%%" target="_blank"><img src="/img/facebook-icon-colored.png" alt=""></a></li>
                  <li><a href="http://twitter.com/share?text=%%content_share%%&url=https://agos.rappler.com/reports/%%id%%" target="_blank"><img src="/img/twitter-icon-colored.png" alt=""></a></li>
                </ul>
              </div>
              <div class="clear"></div>
              <div class="report-content">
                <div class="side">
                  <span id="verify_info_window" class="verified %%not_verified%%"><img src="/img/icon-tick.png" title="%%verifier_text%%" alt="Verified"></span>
                </div>
                <p>%%content%%</p>

                <div class="report-photo-thumb fancybox">%%photo%%</div>

                <div class="clear"></div>
                <div class="reporter-name %%noowner%%"><i class="fa fa-user"></i>
                    <span>%%owner%%</span>%%official%%
                </div>
                <div class="report-location icon-map-marker-gray no-padding-top %%nolocation%%">
                  <span>%%location%%</span>
                </div>
                <div class="clear"></div>
                
                <div class="user-details hide" style="margin-left: 28px;"></div>
              </div>
              <a href="#" class="view-response no-border hide">View official responses</a>

              <div class="report-reply">
                <form id="submit-comment-form">
                  <input type="hidden" id="comment_form_report_id" name="report" value="%%id%%" />
                  <input type="text" class="cls_comment_form_content" id="comment_form_content" required="required" name="content" placeholder="Reply to this report..."/>
                  <input type="submit" id="comment_form_submit" value="Post" class="btn-default btn-sm pull-right"/>
                </form>
              </div>

              <a href="#" class="view-response no-border rappler-paragraph hide">View %%replies%%</a>

              <ul class="response-list">%%comments%%</ul>

            </div>

          </div>
        </div>
      </div>
    </script>

    <script type="text/x-template" id="report-item-template-2">
      <li class="%%gray%%">
        <a href="/mobile/edge-alert/%%id%%">
          <span class="report-source"><img src="/img2/icon-twitter.png" alt=""></span><em class="timestamp">%%timestamp%%</em><span class="pull-right prioritize"><button class="btn-up"><span class="up-count">%%upvote_count%%</span></button></span>
          <div>
            <span class="report-marker rescue">%%marker_image%%</span>
            <p class="word-wrap">%%content%%</p>
            <span class="report-photo-thumb">%%photo%%</span>
          </div>
        </a>
      </li>
    </script>

    <script type="text/x-template" id="report-item-template">
      <li class="report_item %%gray%%" id="specific_report_item_%%index%%">
          <div class="report-list-top">
            <span class="report-type"><span class="report-%%icon%%"></span></span>
            <em class="timestamp">%%timestamp%%</em>&nbsp;&nbsp;
            <a class="share-in-report" href="https://www.facebook.com/sharer/sharer.php?u=https://agos.rappler.com/reports/%%id%%" target="_blank"><img src="/img/facebook-icon-colored.png" alt=""></a>
            <a class="share-in-report" href="http://twitter.com/share?text=%%content_share%%&url=https://agos.rappler.com/reports/%%id%%" target="_blank"><img src="/img/twitter-icon-colored.png" alt=""></a>
            <em class="reply-count %%noreply%%"> <sup>.</sup> %%replies%%</em>

            

            <div class="up-vote" onclick="upvote(%%index%%)">
              <span><b>Prioritize this</b></span>
              <span><button class="btn-up">&nbsp;</button></span>
              <span class="up-count" id="up-count2-%%index%%">%%upvote_count%%</span>
            </div>

            <div class="clear"></div>

          </div>
          <div class="report-content" onclick="specific_report(%%index%%)">
            <div class="side">
              <div class="report-marker">
                %%marker_image%%
              </div>
              <span class="verified %%not_verified%%"><img src="/img/icon-tick.png" title="%%verifier_text%%" alt="Verified"></span>
            </div>
            <p>%%content%%</p>
            <span class="report-photo-thumb">%%photo%% </span>
          </div>

          
        </li>
    </script>


    <script type="text/x-template" id="dataset-menu-template">
      <li class="cb-container cb-container-t %%id%%" data-id="%%id%%">

          <div class="flip-switch">
            <input type="checkbox" name="flip-switch-%%id%%" class="normal dynamic-switch-%%id%% firstset" id="%%id%%" value="%%id%%">
          </div>
          <span class="switch-label"><a href="#" class="kind">%%title%%</a></span>

      </li>
    </script>

    <script type="text/x-template" id="single-comment-template">
      <li>
        <b class="respondent %%official%%">%%owner%%%%official-verified%%</b>
        <em class="timestamp"><sup>.</sup> %%timestamp%%</em>
        <p>%%content%%</p>
      </li>
    </script>

  <!-- Add fancyBox main JS file -->
  <script type="text/javascript" src="/js/jquery.fancybox.js?v=2.1.5"></script>

  <!-- Custom scrollbar plugin -->
  <!-- <script src="/js/jquery.mCustomScrollbar.concat.min.js"></script> -->

  <script type="text/javascript">

     var _gaq = _gaq || [];
     _gaq.push(['_setAccount', 'UA-26553497-1']);
     _gaq.push(['_setDomainName', 'rappler.com']);
     _gaq.push(['_trackPageview']);

     (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();

    </script>


<iframe src="https://cdns.us1.gigya.com/gs/webSdk/Api.aspx?apiKey=3_ao3WNnqtFDhSjgAe1TC-0ykqEbogOlYXE1kYr0LoFxTDRzrwrGJkZpdnR_XEn3D5&amp;version=latest#origin=https://agos.rappler.com/embedmap&amp;hasGmid=true&amp;gig_loggerConfig=%7B%22logLevel%22%3A0%2C%22clientMuteLevel%22%3A0%2C%22logTheme%22%3A1%7D" style="position: absolute; height: 0px; width: 0px; display: none;"></iframe><iframe src="about:blank" frameborder="0" style="border: 0px; visibility: visible; z-index: 2147483647; position: fixed; width: 100%; left: 0px; bottom: 0px; height: 300px; display: none;" id="FirebugUI"></iframe><div class="pac-container pac-logo" style="display: none; width: 0px; position: absolute; left: 0px; top: 0px;"></div><div class="pac-container pac-logo" style="display: none; width: 170px; position: absolute; left: 0px; top: 52px;"></div></body></html>